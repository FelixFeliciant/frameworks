<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Build System: Cross-Domain (xDomain) Builds &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="up" title="Dojo Build" href="contents.html" />
    <link rel="next" title="Dojo Documentation Tools" href="../util/doctools.html" />
    <link rel="prev" title="Dojo build system: restoreRequire" href="restoreRequire.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="../util/doctools.html" title="Dojo Documentation Tools"
			 accesskey="N">next</a></li>
            <li >
		      <a href="restoreRequire.html" title="Dojo build system: restoreRequire"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="contents.html" accesskey="U">Dojo Build</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">Build System:  Cross-Domain (xDomain) Builds</a><ul>
<li><a class="reference" href="#cross-domain-xdomain-builds">Cross Domain (XDomain) Builds</a><ul>
<li><a class="reference" href="#benefits">Benefits</a></li>
<li><a class="reference" href="#implications-limitations">Implications/Limitations</a></li>
<li><a class="reference" href="#module-specific-notes">Module-specific Notes</a></li>
<li><a class="reference" href="#doing-xdomain-builds">Doing xdomain builds</a></li>
<li><a class="reference" href="#how-to-use-xdomain-builds-in-web-pages">How to use xdomain builds in web pages</a></li>
<li><a class="reference" href="#xdomain-example">XDomain Example</a><ul>
<li><a class="reference" href="#see-also">See also</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="restoreRequire.html"
                                  title="previous chapter">Dojo build system:  restoreRequire</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../util/doctools.html"
                                  title="next chapter">Dojo Documentation Tools</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/build/xDomain.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="build-system-cross-domain-xdomain-builds">
<h1><a class="toc-backref" href="#id1">Build System:  Cross-Domain (xDomain) Builds<a class="headerlink" href="#build-system-cross-domain-xdomain-builds" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.0</td>
</tr>
<tr class="field"><th class="field-name">Project owner:</th><td class="field-body">?&#8211;</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since V?</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#build-system-cross-domain-xdomain-builds" id="id1" name="id1">Build System:  Cross-Domain (xDomain) Builds</a><ul>
<li><a class="reference" href="#cross-domain-xdomain-builds" id="id2" name="id2">Cross Domain (XDomain) Builds</a></li>
</ul>
</li>
</ul>
</div>
<p>Content copied (pending modification) from main quickstart page:</p>
<div class="section" id="cross-domain-xdomain-builds">
<h2><a class="toc-backref" href="#id2">Cross Domain (XDomain) Builds<a class="headerlink" href="#cross-domain-xdomain-builds" title="Permalink to this headline">¶</a></a></h2>
<p>Doing an xdomain build allows you to load Dojo and your custom modules from another domain.</p>
<div class="section" id="benefits">
<h3>Benefits<a class="headerlink" href="#benefits" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>You get more connections in MSIE, since you can load from another domain. Faster loading.</li>
<li>You get increased cacheability/startup if many of your applications use the same installation.</li>
<li>Resource loading does not block the rest of the page from filling in as with Dojo&#8217;s normal, synchronous loading.</li>
<li>With a local install, your ISP may charge you for all of those Dojo bits that you are serving.</li>
</ul>
</div>
<div class="section" id="implications-limitations">
<h3>Implications/Limitations<a class="headerlink" href="#implications-limitations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Not all external resources can be xdomain loaded, in particular some support files that need to be loaded from the same domain as the HTML page. See module-specifc notes below.</li>
<li><strong>Requires</strong> a &#8220;xdomain&#8221; build of Dojo (see below for more info on how to make a xdomain build).</li>
<li>Asynchronous loading. You MUST use dojo.addOnLoad() to register a callback function to get notification of package loading. This can be used even after the initial page load. Just do the dojo.require()s that you need, and then call dojo.addOnLoad() with a callback function, and once those new packages are loaded (or if they are already loaded), then the callback will be called. This technique works even for the normal Dojo loader, so this is a good practice to use even when not using an xdomain build.</li>
<li>Avoid using document.write(): Since module can load asychnously, after the page is loaded, document.write can cause problems.</li>
</ul>
</div>
<div class="section" id="module-specific-notes">
<h3>Module-specific Notes<a class="headerlink" href="#module-specific-notes" title="Permalink to this headline">¶</a></h3>
<p><strong>dojo.io.iframe.create(), dijit.Editor, dijit._editor.RichText</strong>: You need to save dojo/resources/blank.html to the same domain as your HTML page and set djConfig.dojoBlankHtmlUrl to the path on that domain. <strong>Note:</strong> The dijit.Editor/dijit._editor.RichText has a bug in release 1.1.0 where it was not using this djConfig parameter. It is fixed in Dojo 1.1.1 and later.</p>
<p><strong>dojo.back</strong>: You need to save dojo/resources/blank.html to the same domain as your HTML page and set djConfig.dojoIframeHistoryUrl to the path on that domain.</p>
<p><strong>dojox.flash.Info()</strong>: It uses document.write() which will cause problems if dojox.flash is loaded via dojo.require().</p>
</div>
<div class="section" id="doing-xdomain-builds">
<h3>Doing xdomain builds<a class="headerlink" href="#doing-xdomain-builds" title="Permalink to this headline">¶</a></h3>
<p>Sample xdomain build command:</p>
<div class="highlight-python"><pre>$ cd util/buildscripts
$ build.sh profile=foo loader=xdomain xdDojoPath=http://my.server.com/path/to/buildoutputdir action=release</pre>
</div>
<p>xdDojoPath is optional. It just burns in the location of dojo, dijit and dojox into the built dojo.js. If you do not specify that option, then you will need to use djConfig.modulePaths/dojo.registerModulePath() in your HTML page to set the xdomain locations for dojo, dijit and dojox. For your own custom modules, you will have to set djConfig.modulePaths/dojo.registerModulePath() even if you us the xdDojoPath build option.</p>
<p><strong>For Dojo 0.9 through 1.1.x</strong>: there is a <a class="reference" href="http://trac.dojotoolkit.org/ticket/4462">bug about loading dojox.gfx with an xdomain build</a>; this is fixed in Dojo 1.2. If you want to use dojox.gfx with an xdomain build of Dojo 0.9-1.1.x, there some work-arounds exist:</p>
<blockquote>
<ol class="arabic simple">
<li>Include dojox/gfx.js directly in your page with a script tag in the HTML source, after the dojo.js script tag (do not use gfx.xd.js, use gfx.js).</li>
<li>Include dojox.gfx in a layer file that you load via a script tag in the HTML source (load the .js layer file, not the .xd.js layer file).</li>
</ol>
</blockquote>
</div>
<div class="section" id="how-to-use-xdomain-builds-in-web-pages">
<h3>How to use xdomain builds in web pages<a class="headerlink" href="#how-to-use-xdomain-builds-in-web-pages" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In <strong>djConfig</strong>, add <strong>useXDomain = true</strong>.</li>
<li>In <strong>djConfig</strong>, add a modulePaths object that maps where to find your modules.</li>
<li>Register a callback function to get notification of when the packages are loaded by using <strong>dojo.addOnLoad()</strong>.</li>
<li>Optional: set a wait time in milliseconds (<strong>djConfig.xdWaitSeconds</strong>) that specifies how long the resource loader should wait for a resource to load until returning an error. Since script elements do not give information about failed or long-running requests, this timeout is used to prevent infinite waiting in the browser. An exception will be thrown to indicate a load error. The default xdWaitSeconds is 15.</li>
</ul>
</div>
<div class="section" id="xdomain-example">
<h3>XDomain Example<a class="headerlink" href="#xdomain-example" title="Permalink to this headline">¶</a></h3>
<p><a class="reference" href="http://jburke.dojotoolkit.org/demos/xdlocal/LocalAndXd.html">Here is an example</a> showing how to load local modules along with an xdomain-loaded dojo and dijit. You can <a class="reference" href="http://jburke.dojotoolkit.org/demos/xdlocal/xdlocal.zip">download this example</a>.</p>
<div class="section" id="see-also">
<h4>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>TODO: links to other related articles</li>
</ul>
</div>
</div>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>