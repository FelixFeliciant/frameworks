<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.gfx.matrix &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="up" title="DojoX" href="contents.html" />
    <link rel="next" title="Shape properties" href="gfx-visual-properties.html" />
    <link rel="prev" title="dojox.gfx" href="gfx.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="gfx-visual-properties.html" title="Shape properties"
			 accesskey="N">next</a></li>
            <li >
		      <a href="gfx.html" title="dojox.gfx"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="contents.html" accesskey="U">DojoX</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">dojox.gfx.matrix</a><ul>
<li><a class="reference" href="#coordinates-and-transformations">Coordinates and transformations</a></li>
<li><a class="reference" href="#matrix2d-and-normalization">Matrix2D and normalization</a><ul>
<li><a class="reference" href="#matrix2d">Matrix2D</a></li>
<li><a class="reference" href="#normalize">normalize</a></li>
</ul>
</li>
<li><a class="reference" href="#constants">Constants</a><ul>
<li><a class="reference" href="#identity">identity</a></li>
<li><a class="reference" href="#flipx">flipX</a></li>
<li><a class="reference" href="#flipy">flipY</a></li>
<li><a class="reference" href="#flipxy">flipXY</a></li>
</ul>
</li>
<li><a class="reference" href="#matrix-creators">Matrix creators</a><ul>
<li><a class="reference" href="#translate">translate</a></li>
<li><a class="reference" href="#scale">scale</a></li>
<li><a class="reference" href="#rotate">rotate</a></li>
<li><a class="reference" href="#skewx">skewX</a></li>
<li><a class="reference" href="#skewy">skewY</a></li>
<li><a class="reference" href="#reflect">reflect</a></li>
<li><a class="reference" href="#project">project</a></li>
</ul>
</li>
<li><a class="reference" href="#general-operations">General operations</a><ul>
<li><a class="reference" href="#invert">invert</a></li>
<li><a class="reference" href="#clone">clone</a></li>
<li><a class="reference" href="#multiplypoint">multiplyPoint</a></li>
<li><a class="reference" href="#multiply">multiply</a></li>
</ul>
</li>
<li><a class="reference" href="#sandwich-helpers">&#8220;Sandwich&#8221; helpers</a><ul>
<li><a class="reference" href="#scaleat">scaleAt</a></li>
<li><a class="reference" href="#rotateat">rotateAt</a></li>
<li><a class="reference" href="#skewxat">skewXAt</a></li>
<li><a class="reference" href="#skewyat">skewYAt</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="gfx.html"
                                  title="previous chapter">dojox.gfx</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="gfx-visual-properties.html"
                                  title="next chapter">Shape properties</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/dojox/gfx-geometric-properties.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dojox-gfx-matrix">
<span id="dojox-gfx-geometric-properties"></span><h1><a class="toc-backref" href="#id1">dojox.gfx.matrix<a class="headerlink" href="#dojox-gfx-matrix" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.3</td>
</tr>
<tr class="field"><th class="field-name">Authors:</th><td class="field-body">Eugene Lazutkin, Kun Xi, Chris Mitchell</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since 0.4</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#dojox-gfx-matrix" id="id1" name="id1">dojox.gfx.matrix</a><ul>
<li><a class="reference" href="#coordinates-and-transformations" id="id2" name="id2">Coordinates and transformations</a></li>
<li><a class="reference" href="#matrix2d-and-normalization" id="id3" name="id3">Matrix2D and normalization</a><ul>
<li><a class="reference" href="#matrix2d" id="id4" name="id4">Matrix2D</a></li>
<li><a class="reference" href="#normalize" id="id5" name="id5">normalize</a></li>
</ul>
</li>
<li><a class="reference" href="#constants" id="id6" name="id6">Constants</a><ul>
<li><a class="reference" href="#identity" id="id7" name="id7">identity</a></li>
<li><a class="reference" href="#flipx" id="id8" name="id8">flipX</a></li>
<li><a class="reference" href="#flipy" id="id9" name="id9">flipY</a></li>
<li><a class="reference" href="#flipxy" id="id10" name="id10">flipXY</a></li>
</ul>
</li>
<li><a class="reference" href="#matrix-creators" id="id11" name="id11">Matrix creators</a><ul>
<li><a class="reference" href="#translate" id="id12" name="id12">translate</a></li>
<li><a class="reference" href="#scale" id="id13" name="id13">scale</a></li>
<li><a class="reference" href="#rotate" id="id14" name="id14">rotate</a></li>
<li><a class="reference" href="#skewx" id="id15" name="id15">skewX</a></li>
<li><a class="reference" href="#skewy" id="id16" name="id16">skewY</a></li>
<li><a class="reference" href="#reflect" id="id17" name="id17">reflect</a></li>
<li><a class="reference" href="#project" id="id18" name="id18">project</a></li>
</ul>
</li>
<li><a class="reference" href="#general-operations" id="id19" name="id19">General operations</a><ul>
<li><a class="reference" href="#invert" id="id20" name="id20">invert</a></li>
<li><a class="reference" href="#clone" id="id21" name="id21">clone</a></li>
<li><a class="reference" href="#multiplypoint" id="id22" name="id22">multiplyPoint</a></li>
<li><a class="reference" href="#multiply" id="id23" name="id23">multiply</a></li>
</ul>
</li>
<li><a class="reference" href="#sandwich-helpers" id="id24" name="id24">&#8220;Sandwich&#8221; helpers</a><ul>
<li><a class="reference" href="#scaleat" id="id25" name="id25">scaleAt</a></li>
<li><a class="reference" href="#rotateat" id="id26" name="id26">rotateAt</a></li>
<li><a class="reference" href="#skewxat" id="id27" name="id27">skewXAt</a></li>
<li><a class="reference" href="#skewyat" id="id28" name="id28">skewYAt</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="coordinates-and-transformations">
<h2><a class="toc-backref" href="#id2">Coordinates and transformations<a class="headerlink" href="#coordinates-and-transformations" title="Permalink to this headline">¶</a></a></h2>
<p>In order to understand transformations you need to be familiar with fundamentals of matrices (matrix multiplication, multiplication of a vector by a matrix, order of multiplications). <a class="reference" href="gfx.html#dojox-gfx"><em>dojox.gfx</em></a> uses a mnemonic way to describe a matrix: <tt class="docutils literal"><span class="pre">xx</span></tt> scales an <tt class="docutils literal"><span class="pre">X</span></tt> component of a coordinate, <tt class="docutils literal"><span class="pre">yy</span></tt> scales a <tt class="docutils literal"><span class="pre">Y</span></tt> component, <tt class="docutils literal"><span class="pre">xy</span></tt>, and <tt class="docutils literal"><span class="pre">yx</span></tt> affect both components, <tt class="docutils literal"><span class="pre">dx</span></tt> moves an <tt class="docutils literal"><span class="pre">X</span></tt> component, and <tt class="docutils literal"><span class="pre">dy</span></tt> moves a <tt class="docutils literal"><span class="pre">Y</span></tt> component. If you want to refresh your memory, read our <a class="reference" href="gfx/matrix-tutorial.html#dojox-gfx-matrix-tutorial"><em>Matrix tutorial</em></a>.</p>
<p>Simple examples:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">2}</span></tt> &#8212; stretches the <tt class="docutils literal"><span class="pre">X</span></tt> dimension by 2.</li>
<li><tt class="docutils literal"><span class="pre">{yy:</span> <span class="pre">0.5}</span></tt> &#8212; <tt class="docutils literal"><span class="pre">&quot;stretches&quot;</span></tt> the <tt class="docutils literal"><span class="pre">Y</span></tt> dimension by 0.5 (shrinks by 2).</li>
<li><tt class="docutils literal"><span class="pre">{dx:</span> <span class="pre">5,</span> <span class="pre">dy:</span> <span class="pre">10}</span></tt> &#8212; shifts an <tt class="docutils literal"><span class="pre">X</span></tt> coordinate by 5, a <tt class="docutils literal"><span class="pre">Y</span></tt> coordinate by 10.</li>
<li><tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">0.866,</span> <span class="pre">xy:</span> <span class="pre">0.5,</span> <span class="pre">yx:</span> <span class="pre">−0.5,</span> <span class="pre">yy:</span> <span class="pre">0.866}</span></tt> &#8212; rotates everything by approximately 30 degrees clockwise (CW) around point <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">0,</span> <span class="pre">xy:</span> <span class="pre">1,</span> <span class="pre">yx:</span> <span class="pre">−1,</span> <span class="pre">yy:</span> <span class="pre">0,</span> <span class="pre">dx:</span> <span class="pre">100}</span></tt> &#8212; rotates everything by 90 degrees CW around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>, and moves things right by 100.</li>
</ul>
<p>Don’t worry, in most cases you don’t need to calculate all members of a transformation matrix directly. As you can see not all members of matrix should be specified &#8212; all skipped members going to be copied from the identity matrix.</p>
<p>There is a shortcut for scaling &#8212; if a number N is used instead of a matrix, it is assumed that it represents a uniform scaling matrix <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">N,</span> <span class="pre">yy:</span> <span class="pre">N}</span></tt>.</p>
<p>There is a shortcut for multiplication (see <a class="reference" href="#multiply">multiply</a> for details) &#8212; is an array is used it is treated as an array of matrices, and all matrices will be multiplied to produce the final matrix.</p>
<p><em>dojox.gfx.matrix</em> defines <tt class="docutils literal"><span class="pre">Matrix2D</span></tt> class, as well as numerous helpers (<tt class="docutils literal"><span class="pre">Matrix2D</span></tt> is propagated to <tt class="docutils literal"><span class="pre">dojox.gfx</span></tt> namespace for convenience). Most important of them (all in <tt class="docutils literal"><span class="pre">dojox.gfx.matrix</span></tt> namespace) are listed below.</p>
</div>
<div class="section" id="matrix2d-and-normalization">
<h2><a class="toc-backref" href="#id3">Matrix2D and normalization<a class="headerlink" href="#matrix2d-and-normalization" title="Permalink to this headline">¶</a></a></h2>
<p>As you can see developers can specify matrices in a variety of ways. But for performance reasons internally it is always converted to <tt class="docutils literal"><span class="pre">Matrix2D</span></tt>, which has all proper attributes defined. You can achieve this normalization by instantiating <a class="reference" href="#matrix2d">Matrix2D</a> object or by invoking a creator function called <a class="reference" href="#normalize">normalize</a>.</p>
<div class="section" id="matrix2d">
<h3><a class="toc-backref" href="#id4">Matrix2D<a class="headerlink" href="#matrix2d" title="Permalink to this headline">¶</a></a></h3>
<p>Matrix2D is the class for our 2 by 3 matrix. You can always use it to normalize your matrix expression to the canonical representation. It is available in both namespaces: <tt class="docutils literal"><span class="pre">dojox.gfx</span></tt> and <tt class="docutils literal"><span class="pre">dojox.gfx.matrix</span></tt>.</p>
<p>Examples:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c">// identity {xx: 1, xy: 0, dx: 0, yx: 0, yy: 1, dy: 0}</span>
<span class="k">var</span> <span class="nx">m1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">();</span>

<span class="c">// shift down {xx: 1, xy: 0, dx: 0, yx: 0, yy: 1, dy: 10}</span>
<span class="k">var</span> <span class="nx">m2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">({</span><span class="nx">dy</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>

<span class="c">// scale by 2 {xx: 2, xy: 0, dx: 0, yx: 0, yy: 2, dy: 0}</span>
<span class="k">var</span> <span class="nx">m3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="c">// scale by 2 and shift down {xx: 2, xy: 0, dx: 0, yx: 0, yy: 2, dy: 10}</span>
<span class="k">var</span> <span class="nx">m3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">([{</span><span class="nx">dy</span><span class="o">:</span> <span class="mi">10</span><span class="p">}</span><span class="o">,</span> <span class="mi">2</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="normalize">
<h3><a class="toc-backref" href="#id5">normalize<a class="headerlink" href="#normalize" title="Permalink to this headline">¶</a></a></h3>
<p>There is one more useful function: <tt class="docutils literal"><span class="pre">normalize(m)</span></tt>, which returns <a class="reference" href="#matrix2d">Matrix2D</a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="k">var</span> <span class="nx">m1</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>        <span class="c">// =&gt; {xx: 2, xy: 0, yx: 0, yy: 2, dx: 0, dy: 0}</span>

<span class="k">var</span> <span class="nx">m2</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">({</span><span class="nx">dy</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span> <span class="c">// =&gt; {xx: 1, xy: 0, yx: 0, yy: 1, dx: 0, dy: 5}</span>

<span class="k">var</span> <span class="nx">m3</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">([</span><span class="nx">scale</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">,</span> <span class="nx">translate</span><span class="p">(</span><span class="mi">100</span><span class="o">,</span> <span class="mi">200</span><span class="p">)]);</span>
                              <span class="c">// =&gt; {xx: 2, xy: 0, yx: 0, yy: 2, dx: 200, dy: 400}</span>
</pre></div>
</div>
<p>The same normalization effect can be achieved with creating a matrix directly.</p>
</div>
</div>
<div class="section" id="constants">
<h2><a class="toc-backref" href="#id6">Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></a></h2>
<p>Some operations do not require any parameters and implemented as predefined constants.</p>
<div class="section" id="identity">
<h3><a class="toc-backref" href="#id7">identity<a class="headerlink" href="#identity" title="Permalink to this headline">¶</a></a></h3>
<p>The identity matrix. This matrix doesn’t change a picture at all.</p>
</div>
<div class="section" id="flipx">
<h3><a class="toc-backref" href="#id8">flipX<a class="headerlink" href="#flipx" title="Permalink to this headline">¶</a></a></h3>
<p>Changes the sign of all <tt class="docutils literal"><span class="pre">X</span></tt> coordinates. This matrix mirrors the picture around the <tt class="docutils literal"><span class="pre">Y</span></tt> axis.</p>
</div>
<div class="section" id="flipy">
<h3><a class="toc-backref" href="#id9">flipY<a class="headerlink" href="#flipy" title="Permalink to this headline">¶</a></a></h3>
<p>Changes the sign of all <tt class="docutils literal"><span class="pre">Y</span></tt> coordinates. This matrix mirrors the picture around the <tt class="docutils literal"><span class="pre">X</span></tt> axis.</p>
</div>
<div class="section" id="flipxy">
<h3><a class="toc-backref" href="#id10">flipXY<a class="headerlink" href="#flipxy" title="Permalink to this headline">¶</a></a></h3>
<p>Changes the sign of all coordinates. This matrix rotates the picture by 180 degrees around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> point. Another way to say it: it mirrors all points around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>.</p>
</div>
</div>
<div class="section" id="matrix-creators">
<h2><a class="toc-backref" href="#id11">Matrix creators<a class="headerlink" href="#matrix-creators" title="Permalink to this headline">¶</a></a></h2>
<p>Matrices can be used to express any linear transformation of coordinates. To simplify the task of creating matrices for common operations numerous matrix creators are provided.</p>
<p>In all signatures <tt class="docutils literal"><span class="pre">a</span></tt>, <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">c</span></tt>, and <tt class="docutils literal"><span class="pre">e</span></tt> are numbers (coordinate components or scaling factors), <tt class="docutils literal"><span class="pre">p</span></tt> is a 2D coordinate, <tt class="docutils literal"><span class="pre">r</span></tt> is an angle in radians, <tt class="docutils literal"><span class="pre">d</span></tt> is an angle in degrees (positive value of an angle is CW), <tt class="docutils literal"><span class="pre">m</span></tt> is a matrix.</p>
<p>If a function accepts an angle value, there are two versions of this function: with radians, and with degrees. The latter will be denoted with <tt class="docutils literal"><span class="pre">g</span></tt> suffix. Example: <tt class="docutils literal"><span class="pre">rotate(r)</span></tt> accepts radians, while <tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> accepts degrees.</p>
<div class="section" id="translate">
<h3><a class="toc-backref" href="#id12">translate<a class="headerlink" href="#translate" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">translate(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">translate(p)</span></tt>. Shifts everything:</p>
<blockquote>
<ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">{dx:</span> <span class="pre">a,</span> <span class="pre">dy:</span> <span class="pre">b}</span></tt></li>
<li>by <tt class="docutils literal"><span class="pre">{dx:</span> <span class="pre">p.x,</span> <span class="pre">dy:</span> <span class="pre">p.y}</span></tt></li>
</ul>
</blockquote>
</div>
<div class="section" id="scale">
<h3><a class="toc-backref" href="#id13">scale<a class="headerlink" href="#scale" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">scale(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">scale(a)</span></tt>, <tt class="docutils literal"><span class="pre">scale(p)</span></tt>. Scales a picture:</p>
<blockquote>
<ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">a,</span> <span class="pre">yy:</span> <span class="pre">b}</span></tt></li>
<li>by <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">a,</span> <span class="pre">yy:</span> <span class="pre">a}</span></tt></li>
<li>by <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">p.x,</span> <span class="pre">yy:</span> <span class="pre">p.y}</span></tt></li>
</ul>
</blockquote>
</div>
<div class="section" id="rotate">
<h3><a class="toc-backref" href="#id14">rotate<a class="headerlink" href="#rotate" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">rotate(r)</span></tt>, <tt class="docutils literal"><span class="pre">rotateg(d)</span></tt>. Rotates a picture around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>:</p>
<blockquote>
<ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">r</span></tt> radians</li>
<li>by <tt class="docutils literal"><span class="pre">d</span></tt> degrees</li>
</ul>
</blockquote>
</div>
<div class="section" id="skewx">
<h3><a class="toc-backref" href="#id15">skewX<a class="headerlink" href="#skewx" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">skewX(r)</span></tt>, <tt class="docutils literal"><span class="pre">skewXg(d)</span></tt>. Skews a picture around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> in the <tt class="docutils literal"><span class="pre">X</span></tt> dimension:</p>
<blockquote>
<ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">r</span></tt> radians</li>
<li>by <tt class="docutils literal"><span class="pre">d</span></tt> degrees</li>
</ul>
</blockquote>
</div>
<div class="section" id="skewy">
<h3><a class="toc-backref" href="#id16">skewY<a class="headerlink" href="#skewy" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">skewY(r)</span></tt>, <tt class="docutils literal"><span class="pre">skewYg(d)</span></tt>. Skews a picture around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> in the <tt class="docutils literal"><span class="pre">Y</span></tt> dimension:</p>
<blockquote>
<ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">r</span></tt> radians</li>
<li>by <tt class="docutils literal"><span class="pre">d</span></tt> degrees</li>
</ul>
</blockquote>
</div>
<div class="section" id="reflect">
<h3><a class="toc-backref" href="#id17">reflect<a class="headerlink" href="#reflect" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">reflect(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">reflect(p)</span></tt>. Reflects points around a line that goes through the origin <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>:</p>
<blockquote>
<ul class="simple">
<li>around the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(a,</span> <span class="pre">b)]</span></tt></li>
<li>around the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(p.x,</span> <span class="pre">p.y)]</span></tt></li>
</ul>
</blockquote>
</div>
<div class="section" id="project">
<h3><a class="toc-backref" href="#id18">project<a class="headerlink" href="#project" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">project(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">project(p)</span></tt>. Projects points on a line that goes through the origin <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>:</p>
<blockquote>
<ul class="simple">
<li>on the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(a,</span> <span class="pre">b)]</span></tt></li>
<li>on the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(p.x,</span> <span class="pre">p.y)]</span></tt></li>
</ul>
</blockquote>
</div>
</div>
<div class="section" id="general-operations">
<h2><a class="toc-backref" href="#id19">General operations<a class="headerlink" href="#general-operations" title="Permalink to this headline">¶</a></a></h2>
<p>In all signatures <tt class="docutils literal"><span class="pre">a</span></tt>, <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">c</span></tt>, and <tt class="docutils literal"><span class="pre">e</span></tt> are numbers (coordinate components or scaling factors), <tt class="docutils literal"><span class="pre">p</span></tt> is a 2D coordinate, <tt class="docutils literal"><span class="pre">r</span></tt> is an angle in radians, <tt class="docutils literal"><span class="pre">d</span></tt> is an angle in degrees (positive value of an angle is CW), <tt class="docutils literal"><span class="pre">m</span></tt> is a matrix.</p>
<div class="section" id="invert">
<h3><a class="toc-backref" href="#id20">invert<a class="headerlink" href="#invert" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">invert(m)</span></tt>. Inverts a matrix. This useful function calculates a matrix, which will do the opposite transformation to the m matrix effectively undoing it. For example, <tt class="docutils literal"><span class="pre">scale(2)</span></tt> produces a matrix to scale uniformly a picture by 2. The opposite matrix is going to be <tt class="docutils literal"><span class="pre">scale(0.5)</span></tt>. We can produce the same result with <tt class="docutils literal"><span class="pre">invert(scale(2))</span></tt>. While it seems complicated for this simple case, frequently it is the only way to calculate an inverted matrix for complex transformation, especially when we don’t know how it was produced initially.</p>
</div>
<div class="section" id="clone">
<h3><a class="toc-backref" href="#id21">clone<a class="headerlink" href="#clone" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">clone(m)</span></tt>. Creates a copy of the <tt class="docutils literal"><span class="pre">m</span></tt> matrix.</p>
</div>
<div class="section" id="multiplypoint">
<h3><a class="toc-backref" href="#id22">multiplyPoint<a class="headerlink" href="#multiplypoint" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">multiplyPoint(m,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">multiplyPoint(m,</span> <span class="pre">p)</span></tt>. Applies a transformation to a coordinate.</p>
</div>
<div class="section" id="multiply">
<h3><a class="toc-backref" href="#id23">multiply<a class="headerlink" href="#multiply" title="Permalink to this headline">¶</a></a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">multiply(m1,</span> <span class="pre">m2,</span> <span class="pre">...)</span></tt>. Multiplies all its parameters to create a single matrix.</p>
<p>This function is extremely useful and there is a shortcut for it: anywhere a matrix is expected, an array of matrices can be specified as well. Examples:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">[2,</span> <span class="pre">rotateg(45)]</span></tt> --- rotates everything 45 degrees CW around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> and scales everything by 2 after that.</li>
<li><tt class="docutils literal"><span class="pre">[{dy:</span> <span class="pre">10},</span> <span class="pre">scale(2,</span> <span class="pre">1)]</span></tt> --- scales all <tt class="docutils literal"><span class="pre">X</span></tt> coordinates by 2, and moves the result down by 10.</li>
</ul>
<p>More complex example: imagine you have a surface 500 by 500 pixels, and you want everything in it to be magnified around its center by 2, and rotated (around the center as well) by 30 degrees CW. It is easy: <tt class="docutils literal"><span class="pre">[translate(250,</span> <span class="pre">250),</span> <span class="pre">rotateg(−30),</span> <span class="pre">scale(2),</span> <span class="pre">translate(-250,</span> <span class="pre">-250)]</span></tt>. Explanations:</p>
<ol class="arabic simple">
<li>All scaling, rotating, and skewing operations work around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> point. Let’s move the center of our picture to <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>: <tt class="docutils literal"><span class="pre">translate(−250,</span> <span class="pre">−250)</span></tt>.</li>
<li>Now we can scale it: <tt class="docutils literal"><span class="pre">scale(2)</span></tt>.</li>
<li>Now we can rotate it: <tt class="docutils literal"><span class="pre">rotateg(−30)</span></tt>.</li>
<li>Now let’s move our center back: <tt class="docutils literal"><span class="pre">translate(250,</span> <span class="pre">250)</span></tt>.</li>
</ol>
<p>You can see that this kind of transformations follow a <tt class="docutils literal"><span class="pre">&quot;sandwich&quot;</span></tt> pattern, where the first and the last transformation move an immutable point to/from the origin of coordinates before performing other origin-based operations. The first operation is usually a translation to the origin, and the last is the inverse of the same translation.</p>
</div>
</div>
<div class="section" id="sandwich-helpers">
<h2><a class="toc-backref" href="#id24">&quot;Sandwich&quot; helpers<a class="headerlink" href="#sandwich-helpers" title="Permalink to this headline">¶</a></a></h2>
<p>These &quot;around the point&quot; operations are so important that <tt class="docutils literal"><span class="pre">dojox.gfx</span></tt> provides several helpers for common transformations. Usually they are named like their middle &quot;meaty&quot; part with the suffix <tt class="docutils literal"><span class="pre">At</span></tt>. Example: <tt class="docutils literal"><span class="pre">scale(a)</span></tt> =&gt; <tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">p)</span></tt>.</p>
<p>In all signatures <tt class="docutils literal"><span class="pre">a</span></tt>, <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">c</span></tt>, and <tt class="docutils literal"><span class="pre">e</span></tt> are numbers (coordinate components or scaling factors), <tt class="docutils literal"><span class="pre">p</span></tt> is a 2D coordinate, <tt class="docutils literal"><span class="pre">r</span></tt> is an angle in radians, <tt class="docutils literal"><span class="pre">d</span></tt> is an angle in degrees (positive value of an angle is CW), <tt class="docutils literal"><span class="pre">m</span></tt> is a matrix.</p>
<p>If a function accepts an angle value, there are two versions of this function: with radians, and with degrees. The latter will be denoted with <tt class="docutils literal"><span class="pre">g</span></tt> suffix. Example: <tt class="docutils literal"><span class="pre">rotate(r)</span></tt> accepts radians, while <tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> accepts degrees.</p>
<div class="section" id="scaleat">
<h3><a class="toc-backref" href="#id25">scaleAt<a class="headerlink" href="#scaleat" title="Permalink to this headline">¶</a></a></h3>
<p>Applies <a class="reference" href="#scale">scale</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a)</span></tt> around <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">b,</span> <span class="pre">c)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a)</span></tt> around <tt class="docutils literal"><span class="pre">(b,</span> <span class="pre">c)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">b,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a,</span> <span class="pre">b)</span></tt> around <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">b,</span> <span class="pre">c,</span> <span class="pre">e)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a,</span> <span class="pre">b)</span></tt> around <tt class="docutils literal"><span class="pre">(c,</span> <span class="pre">e)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="rotateat">
<h3><a class="toc-backref" href="#id26">rotateAt<a class="headerlink" href="#rotateat" title="Permalink to this headline">¶</a></a></h3>
<p>Applies <a class="reference" href="#rotate">rotate</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotateAt(r,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotate(r)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotateAt(r,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotate(r)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotategAt(d,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotategAt(d,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="skewxat">
<h3><a class="toc-backref" href="#id27">skewXAt<a class="headerlink" href="#skewxat" title="Permalink to this headline">¶</a></a></h3>
<p>Applies <a class="reference" href="#skewx">skewX</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXAt(r,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewX(r)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXAt(r,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewX(r)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXgAt(d,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewXg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXgAt(d,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewXg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="skewyat">
<h3><a class="toc-backref" href="#id28">skewYAt<a class="headerlink" href="#skewyat" title="Permalink to this headline">¶</a></a></h3>
<p>Applies <a class="reference" href="#skewy">skewY</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYAt(r,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewY(r)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYAt(r,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewY(r)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYgAt(d,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewYg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYgAt(d,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewYg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>