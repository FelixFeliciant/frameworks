<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.data.jsonPathStore &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../../index.html" />
    <link rel="up" title="DojoX" href="../contents.html" />
    <link rel="next" title="dojox.dtl" href="../dtl.html" />
    <link rel="prev" title="DELETE ME" href="dom/removeChildren.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../../_static/dojo/dijit/themes/dijit.css";
@import "../../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="../dtl.html" title="dojox.dtl"
			 accesskey="N">next</a></li>
            <li >
		      <a href="dom/removeChildren.html" title="DELETE ME"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="../contents.html" accesskey="U">DojoX</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">dojox.data.jsonPathStore</a><ul>
<li><a class="reference" href="#introduction">Introduction</a></li>
<li><a class="reference" href="#supported-apis">Supported APIs</a><ul>
<li><a class="reference" href="#additional-methods">Additional methods</a></li>
</ul>
</li>
<li><a class="reference" href="#usage">Usage</a><ul>
<li><a class="reference" href="#constructor-parameters">Constructor Parameters</a></li>
</ul>
</li>
<li><a class="reference" href="#examples">Examples</a><ul>
<li><a class="reference" href="#programmatic-example">Programmatic example</a></li>
<li><a class="reference" href="#declarative-example">Declarative example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="dom/removeChildren.html"
                                  title="previous chapter">DELETE ME</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../dtl.html"
                                  title="next chapter">dojox.dtl</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/dojox/data/jsonPathStore.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dojox-data-jsonpathstore">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.data.jsonPathStore<a class="headerlink" href="#dojox-data-jsonpathstore" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Contributed, Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.2</td>
</tr>
<tr class="field"><th class="field-name">Authors:</th><td class="field-body">Dustin Machi</td>
</tr>
<tr class="field"><th class="field-name">Developers:</th><td class="field-body">Dustin Machi</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since V1.0</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#dojox-data-jsonpathstore" id="id2" name="id2">dojox.data.jsonPathStore</a><ul>
<li><a class="reference" href="#introduction" id="id3" name="id3">Introduction</a></li>
<li><a class="reference" href="#supported-apis" id="id4" name="id4">Supported APIs</a></li>
<li><a class="reference" href="#usage" id="id5" name="id5">Usage</a></li>
<li><a class="reference" href="#examples" id="id6" name="id6">Examples</a></li>
</ul>
</li>
</ul>
</div>
<p>A local (in memory) store which can attach a dojo.data interface to each javascript object and uses jsonPath as the query language. It takes an arbitrary javascript object as its data structure and attaches to this data structure to present a dojo.data.api interface. Each JavaScript object in the store is an Item in dojo.data parlance.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></a></h2>
<p>JsonPathStore is intended to allow any Object data structure to easily be accessed and controlled by various widgets. It uses <em>JsonPath </em> as a query language. It is a very lightweight server, yet it is flexible enough to allow you to define a single store maintaining several unrelated data sets in a single store. Furthermore, it implements a synchronous mode which makes manipulation of the store possible when appropriate for an application.</p>
</div>
<div class="section" id="supported-apis">
<h2><a class="toc-backref" href="#id4">Supported APIs<a class="headerlink" href="#supported-apis" title="Permalink to this headline">¶</a></a></h2>
<ul>
<li><p class="first"><a class="reference" href="../../dojo/data/api/Read.html#dojo-data-api-read"><em>dojo.data.api.Read</em></a></p>
</li>
<li><p class="first"><a class="reference" href="../../dojo/data/api/Identity.html#dojo-data-api-identity"><em>dojo.data.api.Identity</em></a></p>
</li>
<li><p class="first"><a class="reference" href="../../dojo/data/api/Write.html#dojo-data-api-write"><em>dojo.data.api.Write</em></a></p>
</li>
<li><p class="first"><a class="reference" href="../../dojo/data/api/Notification.html#dojo-data-api-notification"><em>dojo.data.api.Notification</em></a></p>
</li>
<li><p class="first">release also includes experimental synchronous API.</p>
<p>All async features remain the same, but since data is local, custom widgets and code can take advantage of these features while still allowing other normal widgets async access. See the mode property in the constructor parameters</p>
</li>
</ul>
<div class="section" id="additional-methods">
<h3>Additional methods<a class="headerlink" href="#additional-methods" title="Permalink to this headline">¶</a></h3>
<p>In addition to the the standard store api, the store provides a few additional methods of note:</p>
<ul>
<li><p class="first">setData(data)</p>
<p>Set the store&#8217;s data to the supplied object and then load or setup that data with the required meta info.</p>
</li>
<li><p class="first">cleanMeta(data)</p>
<p>Recurse through the provided data object and remove any meta information that has attached. This method also removes any IDs that were auto generated. IDs provided to the store will not be touched.</p>
</li>
<li><p class="first">dump(options)</p>
<p>Takes a options keyword parameter accepting clone, cleanMeata, and suppressExportMeta Boolean options and an export type option that takes &#8220;raw&#8221; or &#8220;json&#8221; as the parameters.</p>
</li>
</ul>
<p>Two addtional notification events are also triggered in this store, onSave() and onRevert() which will each be called after their respective
events have completed.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></a></h2>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3</pre></td><td class="code"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
  <span class="k">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">jsonPathStore</span><span class="p">({</span><span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/stores/store.js&quot;</span><span class="p">});</span>
<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
  <span class="k">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">jsonPathStore</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
       <span class="nx">fruits</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">apple</span><span class="p">}</span><span class="o">,</span>
            <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">2</span><span class="o">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">orange</span><span class="p">}</span>
       <span class="p">]</span><span class="o">,</span>
       <span class="nx">vegetables</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">3</span><span class="o">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brocolli&quot;</span><span class="p">}</span>
       <span class="p">]</span>
   <span class="p">});</span>
<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="constructor-parameters">
<h3>Constructor Parameters<a class="headerlink" href="#constructor-parameters" title="Permalink to this headline">¶</a></h3>
<p>The jsonPathStore takes a single optional parameter in the form of a javascript object containing one or more of the following properties:</p>
<dl class="docutils">
<dt>data</dt>
<dd>JSON String or Javascript Object
JSON String or Javascript object this store will control JSON is converted into an object, and an object passed to the store will be used directly. If no data and no url is provide, an empty object, {}, will be used as the initial store.</dd>
<dt>url - string</dt>
<dd>Load data from this url in JSON format and use the Object created from the data as the data source.</dd>
<dt>indexOnLoad - Boolean</dt>
<dd>Parse the data object and set individual objects up as appropriate. This will add meta data and assign id's to objects that dont' have them as defined by the idAttribute option. Disabling this option will keep this parsing from happening until a query is performed at which time only the top level of an item has meta info stored. This might work in some situations, but you will almost always want to indexOnLoad or use another option which will create an index. Defaults to true.</dd>
<dt>idAttribute - string</dt>
<dd>Defaults to '_id'. The name of the attribute that holds an objects id. This can be a preexisting id provided by the server. If an ID isn't already provided when an object is fetched or added to the store, the autoIdentity system will generate an id for it and add it to the index. There are utility routines for exporting data from the store that can clean any generated IDs before exporting and leave preexisting id's in tact.</dd>
<dt>metaLabel - string</dt>
<dd>Defaults to '_meta' overrides the attribute name that is used by the store for attaching meta information to an object while in the store's control. Defaults to '_meta'.</dd>
<dt>hideMetaAttributes - Boolean</dt>
<dd>Defaults to False. When enabled, calls to getAttributes() will not include the meta attribute.</dd>
<dt>autoIdPrefix: string</dt>
<dd>Defaults to &quot;_auto_&quot;. This string is used as the prefix to any objects which have a generated id. A numeric index is appended to this string to complete the ID</dd>
<dt>mode: dojox.data.ASYNC_MODE || dojox.data.SYNC_MODE</dt>
<dd>Defaults to ASYNC_MODE. This option sets the default mode for this store.
Sync calls return their data immediately from the calling function instead of calling the callback functions. Functions such as fetchItemByIdentity() and fetch() both accept a string parameter in addition to the normal keywordArgs parameter. When passed this option, SYNC_MODE will automatically be used even when the default mode of the system is ASYNC_MODE. A normal request to fetch or fetchItemByIdentity (with kwArgs object) can also include a mode property to override this setting for that one request.</dd>
</dl>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id6">Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></a></h2>
<div class="section" id="programmatic-example">
<h3>Programmatic example<a class="headerlink" href="#programmatic-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
  <span class="k">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">jsonPathStore</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
       <span class="nx">fruits</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">apple</span><span class="p">}</span><span class="o">,</span>
            <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">2</span><span class="o">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">orange</span><span class="p">}</span>
       <span class="p">]</span><span class="o">,</span>
       <span class="nx">vegetables</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">3</span><span class="o">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brocolli&quot;</span><span class="p">}</span>
       <span class="p">]</span>
   <span class="p">});</span>
<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="declarative-example">
<h3>Declarative example<a class="headerlink" href="#declarative-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1</pre></td><td class="code"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">jsId</span><span class="o">=</span><span class="s2">&quot;store&quot;</span> <span class="nx">dojoType</span><span class="o">=</span><span class="s2">&quot;dojox.data.jsonPathStore&quot;</span> <span class="nx">url</span><span class="o">=</span><span class="s2">&quot;/path/to/store.js&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>