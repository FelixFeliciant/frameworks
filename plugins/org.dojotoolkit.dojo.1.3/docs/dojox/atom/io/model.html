<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.atom.io.model &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../../../index.html" />
    <link rel="up" title="DojoX" href="../../contents.html" />
    <link rel="next" title="dojox.atom.io.model.AtomItem" href="model/AtomItem.html" />
    <link rel="prev" title="dojox.atom.io.Connection" href="Connection.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../../../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../../../_static/dojo/dijit/themes/dijit.css";
@import "../../../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../../../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../../../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../../../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="model/AtomItem.html" title="dojox.atom.io.model.AtomItem"
			 accesskey="N">next</a></li>
            <li >
		      <a href="Connection.html" title="dojox.atom.io.Connection"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../../../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="../../contents.html" accesskey="U">DojoX</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../../../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">dojox.atom.io.model</a><ul>
<li><a class="reference" href="#introduction">Introduction</a></li>
<li><a class="reference" href="#classes-defined-in-the-model">Classes defined in the model</a></li>
<li><a class="reference" href="#utility-functions">Utility Functions</a></li>
<li><a class="reference" href="#usage">Usage</a></li>
<li><a class="reference" href="#examples">Examples</a><ul>
<li><a class="reference" href="#example-1-create-an-atom-feed-model-from-an-existing-atom-document">Example 1: Create an ATOM Feed model from an existing ATOM document</a></li>
<li><a class="reference" href="#example-2-create-a-new-atom-feed">Example 2: Create a new ATOM Feed</a></li>
<li><a class="reference" href="#example-3-modify-a-loaded-feed">Example 3: Modify a loaded feed</a></li>
</ul>
</li>
<li><a class="reference" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="Connection.html"
                                  title="previous chapter">dojox.atom.io.Connection</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="model/AtomItem.html"
                                  title="next chapter">dojox.atom.io.model.AtomItem</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../../_sources/dojox/atom/io/model.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dojox-atom-io-model">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.atom.io.model<a class="headerlink" href="#dojox-atom-io-model" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.0</td>
</tr>
<tr class="field"><th class="field-name">Project owner:</th><td class="field-body">Benjamin Schell</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since V1.3</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#dojox-atom-io-model" id="id2" name="id2">dojox.atom.io.model</a><ul>
<li><a class="reference" href="#introduction" id="id3" name="id3">Introduction</a></li>
<li><a class="reference" href="#classes-defined-in-the-model" id="id4" name="id4">Classes defined in the model</a></li>
<li><a class="reference" href="#utility-functions" id="id5" name="id5">Utility Functions</a></li>
<li><a class="reference" href="#usage" id="id6" name="id6">Usage</a></li>
<li><a class="reference" href="#examples" id="id7" name="id7">Examples</a></li>
<li><a class="reference" href="#see-also" id="id8" name="id8">See Also</a></li>
</ul>
</li>
</ul>
</div>
<p>The <em>dojox.atom.io.model</em> module is a JavaScript model of an ATOM feed.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></a></h2>
<p>This module handles the parsing of the ATOM XML into a JavaScript structure that can be easily modified and then serialized out as XML.  This set of classes handles browser idiosyncrasies when parsing the XML, making it very cross-browser compatible and is far simpler to work with than using DOM apis to walk the ATOM XML document.</p>
</div>
<div class="section" id="classes-defined-in-the-model">
<h2><a class="toc-backref" href="#id4">Classes defined in the model<a class="headerlink" href="#classes-defined-in-the-model" title="Permalink to this headline">¶</a></a></h2>
<p>When the model file is loaded, several classes are defined that represent ATOM tags.  Please refer to the following table for the class names and a description of what they represent.  Each entry in the class name table also acts as a link to specific documentation about that class and what core functions it provides.</p>
</div>
<div class="section" id="utility-functions">
<h2><a class="toc-backref" href="#id5">Utility Functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></a></h2>
<p>There are also several utility functions defined by the model.  These functions are used by all of the subclasses and can be useful in standalone cases as well.  Please refer to the following table for function name and description:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<tbody valign="top">
<tr><td><strong>Function</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr><td>dojox.atom.io.model.util.createDate(DOMNode)</td>
<td>A function for parsing the text content of a DOM node and creating a Date object from
it.</td>
</tr>
<tr><td>dojox.atom.io.model.util.escapeHtml(String)</td>
<td>A function for escaping HTML control and entity characters in a string so that it can
be handled as text without the markup affecting the XML document.</td>
</tr>
<tr><td>dojox.atom.io.model.util.unEscapeHtml(String)</td>
<td>A function for restoring the HTML control and tag characters to a string.  Useful when
you wish to unEscape the content of an entry and display it in a Content Pane.</td>
</tr>
<tr><td>dojox.atom.io.model.util.getNodename(Node)</td>
<td>A function for getting the node name of an XML node.  This function exists to handle
browser quirks.  Specifically things such as Internet Explorer&#8217;s poor namespace
handling.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id6">Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></a></h2>
<p>The model is intended for creating, parsing, and working with ATOM feeds in Javascript and being able to easily serialize them out.  Generally to create a Feed you would use dojo.xhrGet() to load an XML document into a DOM, then pass that dom Object to buildFromDom() of a newly instantiated Atom Feed model class.  It will then construct all its subclasses and set its attributes correctly.  For specific usage, please refer to the examples section.</p>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id7">Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></a></h2>
<div class="section" id="example-1-create-an-atom-feed-model-from-an-existing-atom-document">
<h3>Example 1: Create an ATOM Feed model from an existing ATOM document<a class="headerlink" href="#example-1-create-an-atom-feed-model-from-an-existing-atom-document" title="Permalink to this headline">¶</a></h3>
<p><em>Note that this demonstrates that the XML document is converted into a JS object structure as shown by displaying the &#8216;feed&#8217; by converting it to JSON.  The XML form is also displayed underneath it, demonstrating toString() rebuilding the XML form for submission or whatnot.</em></p>
<div dojoType="docs.widget.CompoundViewer"><div dojoType="docs.widget.CodeViewer" label="" lang="javascript"><pre>&lt;script&gt;
  dojo.require(&quot;dojox.atom.io.model&quot;);

  //This function performs some basic dojo initialization and will do the load calling for this example
  function initSimpleAtom () {
    var xhrArgs = {
       url: &quot;/_static/dojo/dojox/atom/tests/widget/samplefeedEdit.xml&quot;,
       preventCache: true,
       handleAs: &quot;xml&quot;
    };

    var deferred = dojo.xhrGet(xhrArgs);

    //Okay, on success we'll process the ATOM doc and generate the JavaScript model
    deferred.addCallback(function(xmlDoc, ioargs){
       var feedRoot = xmlDoc.getElementsByTagName(&quot;feed&quot;);
       var feed = new dojox.atom.io.model.Feed();
       feed.buildFromDom(xmlDoc.documentElement);

       //Emit both the XML (As reconstructed from the Feed object and as a JSON form.
       var xml = dojo.byId(&quot;simpleAtomXml&quot;);
       xml.innerHTML = &quot;&quot;;
       xml.appendChild(dojo.doc.createTextNode(feed.toString()));

       var json = dojo.byId(&quot;simpleAtomJson&quot;);
       json.innerHTML = &quot;&quot;;
       json.appendChild(dojo.doc.createTextNode(dojo.toJson(feed, true)));
    });

    deferred.addErrback(function(error){
       console.debug(e);
    });
  }
  //Set the init function to run when dojo loading and page parsing has completed.
  dojo.addOnLoad(initSimpleAtom);
&lt;/script&gt;</pre></div><div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;div style=&quot;height: 400px; overflow: auto;&quot;&gt;
  &lt;b&gt;As JSON (To show that it is creating a JS structure)&lt;/b&gt;
  &lt;pre id=&quot;simpleAtomJson&quot;&gt;
  &lt;/pre&gt;
  &lt;br&gt;
  &lt;br&gt;
  &lt;b&gt;As XML (Showing toString() returning the XML version)&lt;/b&gt;
  &lt;pre id=&quot;simpleAtomXml&quot;&gt;
  &lt;/pre&gt;
&lt;/span&gt;</pre></div></div></div>
<div class="section" id="example-2-create-a-new-atom-feed">
<h3>Example 2: Create a new ATOM Feed<a class="headerlink" href="#example-2-create-a-new-atom-feed" title="Permalink to this headline">¶</a></h3>
<p><em>Note that this demonstrates using the model to create a new Feed document with a single entry</em></p>
<div dojoType="docs.widget.CompoundViewer"><div dojoType="docs.widget.CodeViewer" label="" lang="javascript"><pre>&lt;script&gt;
  dojo.require(&quot;dojox.atom.io.model&quot;);

  //This function performs some basic dojo initialization and will do the main work for this example
  function initSimpleCreateAtom () {
    //Create a feed with some basic attributes set.
    var feed = new dojox.atom.io.model.Feed();
    feed.id = &quot;This_Is_A_New_Feed_0&quot;;
    feed.addAuthor(&quot;John Doe&quot;, &quot;johndoe&#64;nowhere.org&quot;, &quot;http://johndoeshomepage.org&quot;);
    feed.rights = &quot;Copyright Dojo&quot;;
    feed.updated = new Date();
    feed.published = new Date();
    feed.setTitle(&quot;This &lt;i&gt;is&lt;/i&gt; my Feed title!&quot;, &quot;xhtml&quot;);

    //Create an entry
    var entry = feed.createEntry();
    entry.addAuthor(&quot;Jane Doe&quot;, &quot;janedoe&#64;nowhere.org&quot;, &quot;http://johndoeshomepage.org&quot;);
    entry.setTitle(&quot;This &lt;i&gt;is&lt;/i&gt; my entry title!&quot;, &quot;xhtml&quot;);
    entry.id=&quot;entry_1&quot;;

    //Add the feed entry to the current feed.
    feed.addEntry(entry);

    //Emit The XML form of the feed.
    var xml = dojo.byId(&quot;simpleAtomCreate&quot;);
    xml.innerHTML = &quot;&quot;;
    xml.appendChild(dojo.doc.createTextNode(feed.toString()));
  }
  //Set the init function to run when dojo loading and page parsing has completed.
  dojo.addOnLoad(initSimpleCreateAtom );
&lt;/script&gt;</pre></div><div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;div style=&quot;height: 400px; overflow: auto;&quot;&gt;
  &lt;b&gt;As XML&lt;/b&gt;
  &lt;pre id=&quot;simpleAtomCreate&quot;&gt;
  &lt;/pre&gt;
&lt;/span&gt;</pre></div></div></div>
<div class="section" id="example-3-modify-a-loaded-feed">
<h3>Example 3: Modify a loaded feed<a class="headerlink" href="#example-3-modify-a-loaded-feed" title="Permalink to this headline">¶</a></h3>
<div dojoType="docs.widget.CompoundViewer"><div dojoType="docs.widget.CodeViewer" label="" lang="javascript"><pre>&lt;script&gt;
  dojo.require(&quot;dojox.atom.io.model&quot;);

  //This function performs some basic dojo initialization and will do the load calling for this example
  function initSimpleAtomModified() {
    var xhrArgs = {
       url: &quot;/_static/dojo/dojox/atom/tests/widget/samplefeedEdit.xml&quot;,
       preventCache: true,
       handleAs: &quot;xml&quot;
    };

    var deferred = dojo.xhrGet(xhrArgs);

    //Okay, on success we'll process the ATOM doc and generate the JavaScript model
    deferred.addCallback(function(xmlDoc, ioargs){
       var feedRoot = xmlDoc.getElementsByTagName(&quot;feed&quot;);
       var feed = new dojox.atom.io.model.Feed();
       feed.buildFromDom(xmlDoc.documentElement);

       //Emit XML of the modified feed.
       var xml = dojo.byId(&quot;simpleAtomXmlPristine&quot;);
       xml.innerHTML = &quot;&quot;;
       xml.appendChild(dojo.doc.createTextNode(feed.toString()));

       //Remove an entry.
       var entry = feed.getFirstEntry();
       feed.removeEntry(entry);
       feed.updated = new Date();

       //Emit XML of the modified feed.
       xml = dojo.byId(&quot;simpleAtomXmlModified&quot;);
       xml.innerHTML = &quot;&quot;;
       xml.appendChild(dojo.doc.createTextNode(feed.toString()));
    });

    deferred.addErrback(function(error){
       console.debug(e);
    });
  }
  //Set the init function to run when dojo loading and page parsing has completed.
  dojo.addOnLoad(initSimpleAtomModified);
&lt;/script&gt;</pre></div><div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;div style=&quot;height: 400px; overflow: auto;&quot;&gt;
  &lt;b&gt;Pristine XML&lt;/b&gt;
  &lt;pre id=&quot;simpleAtomXmlPristine&quot;&gt;
  &lt;/pre&gt;
  &lt;br&gt;
  &lt;br&gt;
  &lt;b&gt;Modified XML&lt;/b&gt;
  &lt;pre id=&quot;simpleAtomXmlModified&quot;&gt;
  &lt;/pre&gt;
&lt;/span&gt;</pre></div></div></div>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id8">See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></a></h2>
<ul class="simple">
<li><a class="reference" href="Connection.html#dojox-atom-io-connection"><em>dojox.atom.io.Connection</em></a>: An IO class that simplifies doing APP for an ATOM feed.</li>
<li><a class="reference" href="../../data/AppStore.html#dojox-data-appstore"><em>dojox.data.AppStore</em></a>: A datastore built upon the <em>io</em> modules and provides full APP support.</li>
</ul>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>