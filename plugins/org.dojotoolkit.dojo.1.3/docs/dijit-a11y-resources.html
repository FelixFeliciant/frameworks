<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dijit Accessibility Resources &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="index.html" />
    <link rel="up" title="Dijit" href="dijit/contents.html" />
    <link rel="next" title="Creating Accessible Widgets" href="quickstart/writingWidgets/a11y.html" />
    <link rel="prev" title="Dijit Accessibility Strategy" href="dijit-a11y-strategy.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "_static/dojo/dijit/themes/dijit.css";
@import "_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "_static/dojo/docs/widget/resources/CodeViewer.css";
@import "_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="quickstart/writingWidgets/a11y.html" title="Creating Accessible Widgets"
			 accesskey="N">next</a></li>
            <li >
		      <a href="dijit-a11y-strategy.html" title="Dijit Accessibility Strategy"
			 accesskey="P">previous</a> |</li>
		    <li><a href="contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="dijit/contents.html" accesskey="U">Dijit</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">Dijit Accessibility Resources</a><ul>
<li><a class="reference" href="#role-apis-in-dojo-1-2">Role APIs in Dojo 1.2</a></li>
<li><a class="reference" href="#state-apis-in-dojo-1-2">State APIs in Dojo 1.2</a></li>
<li><a class="reference" href="#examples-of-setting-role-and-state">Examples of setting role and state</a></li>
<li><a class="reference" href="#setting-role-and-state-in-the-widget-template">Setting Role and State in the Widget Template</a></li>
<li><a class="reference" href="#high-contrast-mode-detection">High Contrast Mode Detection</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="dijit-a11y-strategy.html"
                                  title="previous chapter">Dijit Accessibility Strategy</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="quickstart/writingWidgets/a11y.html"
                                  title="next chapter">Creating Accessible Widgets</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/dijit-a11y-resources.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dijit-accessibility-resources">
<span id="dijit-a11y-resources"></span><h1><a class="toc-backref" href="#id1">Dijit Accessibility Resources<a class="headerlink" href="#dijit-accessibility-resources" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Contributed</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.2</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Becky Gibson</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#dijit-accessibility-resources" id="id1" name="id1">Dijit Accessibility Resources</a><ul>
<li><a class="reference" href="#role-apis-in-dojo-1-2" id="id2" name="id2">Role APIs in Dojo 1.2</a></li>
<li><a class="reference" href="#state-apis-in-dojo-1-2" id="id3" name="id3">State APIs in Dojo 1.2</a></li>
<li><a class="reference" href="#examples-of-setting-role-and-state" id="id4" name="id4">Examples of setting role and state</a></li>
<li><a class="reference" href="#setting-role-and-state-in-the-widget-template" id="id5" name="id5">Setting Role and State in the Widget Template</a></li>
<li><a class="reference" href="#high-contrast-mode-detection" id="id6" name="id6">High Contrast Mode Detection</a></li>
</ul>
</li>
</ul>
</div>
<p>Functions for dealing with accessibility are found in dijit._base.wai.js. The name of the file is derived from the <a class="reference" href="http://www.w3.org/WAI/">W3C Web Accessibility Initiative</a> which is hosting the <a class="reference" href="http://www.w3.org/WAI/PF/aria/">ARIA</a> specification. The dijit wai APIs are used to manipulate ARIA roles and properties. In addition, the onload function to detect high contrast mode is part of dijit.wai.</p>
<p>The dijit wai module is provided to normalize setting the roles and states. The ARIA properties are designed to be used with XHTML via namespaces Since a content-type of application/xhtml+xml is required to fully support namespaces an alternate solution is needed for the most commonly supported content-type of text/html. In Firefox 2, the roles are set by prefixing the role value with &#8220;wairole&#8221;. In other browsers, no prefix is required.  In Firefox 2, states can be manipulated using the DOM namespace apis: getAttributeNS, setAttributeNS, and removeAttributeNS. In other browsers, the generic attribute apis, getAttribute, setAttribute, removeAttribute, are used and the property name is prefixed by &#8220;aria-&#8221; such as &#8220;aria-expanded&#8221;. The dijit methods for manipulating roles and properties perform the browser detection and make the correct calls.  The developer needs to provide only the role or property name and value.</p>
<p>In addition to ARIA roles, a set of navigation roles from the <a class="reference" href="http://www.w3.org/TR/2007/WD-xhtml-role-20071004/">XHTML Role Attribute Module</a> are also supported. An element may have a navigation role in addition to an ARIA role. The dijit methods for interacting with roles, only affect ARIA roles, any navigation roles are not modified.</p>
<p>There are separate dijit methods for querying, getting, setting, and removing ARIA roles and states.</p>
<div class="section" id="role-apis-in-dojo-1-2">
<h2><a class="toc-backref" href="#id2">Role APIs in Dojo 1.2<a class="headerlink" href="#role-apis-in-dojo-1-2" title="Permalink to this headline">¶</a></a></h2>
<p>The role apis were modified in 1.2 to affect only ARIA roles and not any navigation role that may have already been defined on the object.  Some of the methods now take an additional parameter but are still compatible with the 1.1 behavior.</p>
<p>The XHTML navigation roles are</p>
<ul class="simple">
<li>banner</li>
<li>contentinfo</li>
<li>definition</li>
<li>main</li>
<li>navigation</li>
<li>search</li>
<li>note</li>
<li>secondary</li>
<li>seealso</li>
</ul>
<p>These are NOT WAI roles and are thus ignored by the dijit getWaiRole and setWaiRole apis.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">hasWaiRole</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">role</span><span class="p">)</span>
</pre></div>
</div>
<p>If the role parameter is provided, returns true if elem has the specified role and false if not. For backwards compatibility with 1.1, if the role parameter is not provided, returns true if any role value exists on elem.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">getWaiRole</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns any role set on elem which is NOT an XHTML Navigation role or an empty string if no role attribute has been set on elem.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">setWaiRole</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">role</span><span class="p">)</span>
</pre></div>
</div>
<p>Set the provided role on elem.  If the current browser is Firefox and the version is prior to release 3,  replace any existing role(s) with &quot;wiarole:&quot; prepended to the role provided.  In other browsers, if the element already has an existing WAI role, replace it with the role provided and maintain any existing XHTML Navigation roles.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">removeWaiRole</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">role</span><span class="p">)</span>
</pre></div>
</div>
<p>Remove the specified role from elem.  For backwards compatibility with 1.1, if no role parameter is provided, remove the entire role attribute from elem.</p>
</div>
<div class="section" id="state-apis-in-dojo-1-2">
<h2><a class="toc-backref" href="#id3">State APIs in Dojo 1.2<a class="headerlink" href="#state-apis-in-dojo-1-2" title="Permalink to this headline">¶</a></a></h2>
<p>These dijit methods set the state values onto an element. In Firefox versions previous to 3 the attributes are set in the &quot;<a class="reference" href="http://www.w3.org/2005/07/aaa">http://www.w3.org/2005/07/aaa</a>&quot; namespace using the getAttritbuteNS() and setAttrbuteNS() apis.  In other browsers &quot;aria-&quot; is added to the front of the state name and the setAttribute() and setAttribute() apis are used. The state parameter must be a valid ARIA state name and the value the appropriate value for the specified state.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">hasWaiState</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">state</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns true if elem has the specified state, false if not.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">getWaiState</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">state</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the value of state set on elem or the empty string if elem has no state set.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">setWaiState</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">state</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">value</span><span class="p">)</span>
</pre></div>
</div>
<p>Sets the specified state and value on elem.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">removeWaiState</span><span class="p">(</span><span class="c">/*Element*/</span> <span class="nx">elem</span><span class="o">,</span> <span class="c">/*String*/</span> <span class="nx">state</span><span class="p">)</span>
</pre></div>
</div>
<p>Remove the specified state from elem.</p>
</div>
<div class="section" id="examples-of-setting-role-and-state">
<h2><a class="toc-backref" href="#id4">Examples of setting role and state<a class="headerlink" href="#examples-of-setting-role-and-state" title="Permalink to this headline">¶</a></a></h2>
<p>The following will set a role of treeitem onto a DOM node:</p>
<div class="highlight-javascript"><pre>dijit.setWaiRole( domNode, “treeitem”);</pre>
</div>
<p>This example sets the state of the treeitem to expanded:</p>
<div class="highlight-javascript"><pre>dijit.setWaiState( focusNode, “expanded”, “true”);</pre>
</div>
<p>This example removes the valuenow property from an indeterminate progress bar.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">removeWaiState</span><span class="p">(</span><span class="nx">internalProgress</span><span class="o">,</span> <span class="s2">&quot;valuenow&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-role-and-state-in-the-widget-template">
<h2><a class="toc-backref" href="#id5">Setting Role and State in the Widget Template<a class="headerlink" href="#setting-role-and-state-in-the-widget-template" title="Permalink to this headline">¶</a></a></h2>
<p>The role and state can also be set via the widget template using the waiRole or waiState prefix. Setting the role in the template is the same as setting it via scripting – the dijit.setWaiRole() method will be called during widget instantiation. Simply add the waiRole=”actualrole” or waiState=”state-value” parameters into the template markup for the element. The element will be passed as the nodeObj into the dijit.setWaiRole() and dijit.setWaiState() methods. The state is specified as a state name and value pair, the state is separated from the value using the hyphen character (-): state-value. Multiple states can be set within the template by separating the state-value pairs with a comma. This mechanism is useful when templates are used to create the objects requiring a role value and when the state is known at creation time.</p>
<p>Here is an example of setting the role in the diijt tree template. The domNode is given the “tree” role.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;dijitTreeContainer&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nx">waiRole</span><span class="o">=</span><span class="s2">&quot;tree&quot;</span>
  <span class="nx">dojoAttachEvent</span><span class="o">=</span><span class="s2">&quot;onclick:_onClick,onkeypress:_onKeyPress&quot;</span><span class="o">&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The role or state can also be specified via variables. This example shows an excerpt from the dijit button template that sets the role and state on the button element.</p>
<div class="highlight-javascript"><pre>&lt;div class="dijit dijitLeft dijitInline dijitButton"
  dojoAttachEvent="onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"&gt;
  &lt;div class='dijitRight'&gt;
    &lt;button class="dijitStretch dijitButtonNode dijitButtonContents" dojoAttachPoint="focusNode,titleNode"
      type="${type}" waiRole="button" waiState="labelledby-${id}_label"&gt;
      &lt;span class="dijitInline ${iconClass}" dojoAttachPoint="iconNode"&gt;
        &lt;span class="dijitToggleButtonIconChar"&gt;&amp;#10003&lt;/span&gt;
      &lt;/span&gt;
      &lt;span class="dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode"&gt;${label}&lt;/span&gt;
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
</div>
</div>
<div class="section" id="high-contrast-mode-detection">
<h2><a class="toc-backref" href="#id6">High Contrast Mode Detection<a class="headerlink" href="#high-contrast-mode-detection" title="Permalink to this headline">¶</a></a></h2>
<p>As discussed in the <a class="reference" href="dijit-a11y-strategy.html#dijit-a11y-strategy"><em>Dijit A11y Strategy</em></a> section, dijit performs a check to determine if high contrast mode or images off mode has been set in the browser.  When this mode is detected the dijit-a11y class is set onto the body element of the page. Approprite dijit-a11y classes have been defined that make appropriate text alternatives visible for any CSS background images (which are no longer visible when high contrast mode has been set) that have been used within the widgets.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dijit</span><span class="p">.</span><span class="nx">wai</span><span class="p">.</span><span class="nx">onload</span><span class="p">()</span>
</pre></div>
</div>
<p>This is meant to be called once before the widgets have rendered to detect high contrast mode and set the dijit-a11y className onto the body element of the page.   The detection mechanism is to create a temporary div with a background image, set top and bottom borders in one color and left and right borders in another color, and move it offscreen via CSS. Add the div to the body element and check the computed style of the div.  If the colors for the top and right borders are computed as the same, then high contrast mode has been set. Also, in Firefox, images off mode can be determined by examining the value of the background image.  Currently images off can not be detected in IE unless high contrast mode has also been set.</p>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>