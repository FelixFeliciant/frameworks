<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo.html &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="up" title="Dojo" href="contents.html" />
    <link rel="next" title="Dojo" href="index.html" />
    <link rel="prev" title="dojo.hitch" href="hitch.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="index.html" title="Dojo"
			 accesskey="N">next</a></li>
            <li >
		      <a href="hitch.html" title="dojo.hitch"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="contents.html" accesskey="U">Dojo</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">dojo.html</a><ul>
<li><a class="reference" href="#usage">Usage</a></li>
<li><a class="reference" href="#examples">Examples</a></li>
<li><a class="reference" href="#background">Background</a></li>
<li><a class="reference" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="hitch.html"
                                  title="previous chapter">dojo.hitch</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="index.html"
                                  title="next chapter">Dojo</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/dojo/html.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dojo-html">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojo.html<a class="headerlink" href="#dojo-html" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.0</td>
</tr>
<tr class="field"><th class="field-name">Authors:</th><td class="field-body">Sam Foster, Nikolai Onken, Marcus Reimann</td>
</tr>
<tr class="field"><th class="field-name">Developers:</th><td class="field-body">Sam Foster, Alex Russell, Dylan Schiemann</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since V1.2</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#dojo-html" id="id2" name="id2">dojo.html</a><ul>
<li><a class="reference" href="#usage" id="id3" name="id3">Usage</a></li>
<li><a class="reference" href="#examples" id="id4" name="id4">Examples</a></li>
<li><a class="reference" href="#background" id="id5" name="id5">Background</a></li>
<li><a class="reference" href="#see-also" id="id6" name="id6">See also</a></li>
</ul>
</li>
</ul>
</div>
<p>As of version 1.2, <strong>dojo.html</strong> is home to a single public helper method: <strong>dojo.html.set()</strong>. It is used to safely and conveniently replace an element&#8217;s content, while providing some hooks and options for how the replacement should be handled.</p>
<p>As of version 1.3, <a class="reference" href="place.html#dojo-place"><em>dojo.place()</em></a> accepts HTML strings for inserting HTML, and may be a better choice for simple HTML insertion. Unless you need to use the params capabilities of <strong>dojo.html.set</strong>, you should use dojo.place(cont, node, &#8220;only&#8221;). dojo.place() has more robust support for injecting an HTML string into the DOM, but it only handles inserting an HTML string as DOM elements, or inserting a DOM node. dojo.place does not handle NodeList insertions or the other capabilities as defined by the params argument for dojo.html.set().</p>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id3">Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></a></h2>
<p>You can think of dojo.html.set() like the good old <a class="reference" href="../dijit/layout/ContentPane.html#dijit-layout-contentpane"><em>ContentPane</em></a>, but outside of a &#8220;Pane&#8221;.</p>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></a></h2>
<div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;script type=&quot;text/javascript&quot;&gt;
dojo.require(&quot;dojo.html&quot;);
dojo.addOnLoad(function() {
  // the first argument is a node reference
  console.log(&quot;loaded&quot;);
  dojo.html.set(dojo.byId(&quot;mycontent&quot;), &quot;loaded!&quot;);
})
&lt;/script&gt;

&lt;div id=&quot;mycontent&quot;&gt;
  Loading...
&lt;/div&gt;</pre></div><p>Of course, if that was all you needed to do, you&#8217;d be better of just setting innerHTML directly. The value of dojo.html.set comes when things get a little less trivial:</p>
<div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;button id=&quot;setbtn&quot;&gt;Click to set content&lt;/button&gt;
&lt;table id=&quot;mytable&quot;&gt;
  &lt;tr&gt;&lt;td&gt;Nothing here yet&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;


&lt;script type=&quot;text/javascript&quot;&gt;
dojo.require(&quot;dojo.html&quot;);

var sethandle = dojo.connect(dojo.byId(&quot;setbtn&quot;), &quot;onclick&quot;, function() {

  dojo.html.set(dojo.byId(&quot;mytable&quot;), '&lt;tr&gt;'
    +'&lt;td&gt;&lt;label&gt;How much?&lt;/label&gt;&lt;/td&gt;'
    +'&lt;td&gt;&lt;input type=&quot;text&quot; dojoType=&quot;dijit.form.NumberTextBox&quot; value=&quot;0&quot;'
    +  ' constraints=&quot;{min:0,max:20,places:0}&quot;'
    +  ' promptMessage= &quot;Enter a value between 0 and +20&quot;'
    +  ' required= &quot;true&quot; invalidMessage= &quot;Wrong!&quot; /&gt;'
    +'&lt;/td&gt;'
    +'&lt;/tr&gt;', {
      parseContent: true,
      onBegin: function() {
        dojo.require('dijit.form.NumberTextBox');
        this.inherited(&quot;onBegin&quot;, arguments);
      }
  });
  dojo.disconnect(sethandle);
  sethandle = null;
  dojo.byId(&quot;setbtn&quot;).innerHTML = &quot;Done&quot;;
})
&lt;/script&gt;</pre></div><p>We&#8217;re getting a lot done here. First, note that we&#8217;re setting content on a table. Some browsers get very unhappy when you try and set <tt class="docutils literal"><span class="pre">innerHTML</span></tt> on tables (and other elements) - <tt class="docutils literal"><span class="pre">dojo.html.set</span></tt> handles all that for you. Also, note that the content includes a widget, and we&#8217;ve added a 3rd parameter to our <tt class="docutils literal"><span class="pre">set()</span></tt> call - an object with some configuration for this set operation. <tt class="docutils literal"><span class="pre">parseContent:</span> <span class="pre">true</span></tt> tells <tt class="docutils literal"><span class="pre">set</span></tt> that when the content has been slopped in there, it should run the parser over the element.</p>
<p>This is a common pattern, and yeilds a common problem - what if we haven&#8217;t got the classes necessary already required? We provide an <tt class="docutils literal"><span class="pre">onBegin</span></tt> function to the set operation to first require the necessary widget. We call <tt class="docutils literal"><span class="pre">this.inherited</span></tt> just in case <tt class="docutils literal"><span class="pre">onBegin</span></tt> has other work it needs to do. But what is &#8220;<tt class="docutils literal"><span class="pre">this</span></tt>&#8220;? <tt class="docutils literal"><span class="pre">dojo.html.set</span></tt> makes use of a <tt class="docutils literal"><span class="pre">dojo.html._ContentSetter</span></tt> class to encapsulate the work it needs to do, so <tt class="docutils literal"><span class="pre">this</span></tt> is an instance of that class. For advanced usage like this, see the api docs and look over source code to fully understand how you can leverage the _ContentSetter class.</p>
<p>My use of <tt class="docutils literal"><span class="pre">dojo.connect</span></tt> to trigger the new content is purely an example, you could obviously make this call from an event handler, xhr callback, etc. There are many many possibilities - here&#8217;s just a couple ideas: applying <tt class="docutils literal"><span class="pre">dojo.behavior</span></tt> to the new content, fading/animating the new content, cloning the new content into another node, escaping or performing substitutions on the content before it lands. I&#8217;ll also mention here that this functionality is also made availiable for <tt class="docutils literal"><span class="pre">NodeLists</span></tt> (<tt class="docutils literal"><span class="pre">dojo.query</span></tt> result objects) via the <tt class="docutils literal"><span class="pre">dojo.NodeList-html</span></tt> module</p>
<p>What else comes out of the box? set takes the following optional params to configure its behavior:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">cleanContent:</th><td class="field-body">Should the content be cleaned of doctype, title and other bothersome markup before injection?</td>
</tr>
<tr class="field"><th class="field-name">extractContent:</th><td class="field-body">Should the content extracted from the <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> wrapper before injection?</td>
</tr>
<tr class="field"><th class="field-name">parseContent:</th><td class="field-body">Should the node by passed to the parser after the new content is set</td>
</tr>
<tr class="field"><th class="field-name">onBegin:</th><td class="field-body">Called right before the content is swapped out, use it for pre-processing your content, preparing the target node, or whatever. <strong>Note</strong>: <tt class="docutils literal"><span class="pre">onBegin</span></tt> does have a default implementation, so unless you wish to replace that, you should include <tt class="docutils literal"><span class="pre">this.inherited(&quot;onBegin&quot;,</span> <span class="pre">arguments)</span></tt> in the function you provide here. You can refer to your target node as <tt class="docutils literal"><span class="pre">this.node</span></tt>, and your content is available as <tt class="docutils literal"><span class="pre">this.content</span></tt> - be sure to put them back when you are done.</td>
</tr>
<tr class="field"><th class="field-name">onEnd:</th><td class="field-body">Called right after the content is swapped out, use it for post-processing your content, or whatever. <strong>Note</strong>: <tt class="docutils literal"><span class="pre">onEnd</span></tt> also has a default implementation. If you use <tt class="docutils literal"><span class="pre">parseContent</span></tt> you can grab the array of widget objects that yeilds from <tt class="docutils literal"><span class="pre">this.parseResults</span></tt></td>
</tr>
<tr class="field"><th class="field-name">onContentError:</th><td class="field-body">This event is called if an error is caught while inserting the new content. A typical example might be if you attempt to inject a <tt class="docutils literal"><span class="pre">div</span></tt> into a <tt class="docutils literal"><span class="pre">tr</span></tt> or similar.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="background">
<h2><a class="toc-backref" href="#id5">Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></a></h2>
<p>If all of this seems a little familiar to you, its because this functionality previously lived inside the <a class="reference" href="../dijit/layout/ContentPane.html#dijit-layout-contentpane"><em>ContentPane</em></a> widget (since dojo&#8217;s early days). The goal of <tt class="docutils literal"><span class="pre">dojo.html.set</span></tt>, the :ref:<tt class="docutils literal"><span class="pre">ContentSetter</span></tt> and the helper methods it employs were to make this functionality available outside of the dijit context, and promote code reuse both across the toolkit and in your code. Some of the other options you may have used in 0.4, or <a class="reference" href="../dojox/layout/ContentPane.html#dojox-layout-contentpane"><em>dojox.layout.ContentPane</em></a> are destined to live in a dojox counterpart to this module, and should be available by 1.2&#8217;s release.</p>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id6">See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></a></h2>
<ul>
<li><p class="first"><a class="reference" href="_base/html.html#dojo-base-html"><em>dojo._base.html</em></a></p>
<p>Basic DOM handling functions, included in Dojo Base</p>
</li>
</ul>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>