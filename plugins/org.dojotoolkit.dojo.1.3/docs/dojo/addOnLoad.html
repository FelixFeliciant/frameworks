<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo.addOnLoad &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="up" title="Dojo" href="contents.html" />
    <link rel="next" title="dojo.addOnUnload" href="addOnUnload.html" />
    <link rel="prev" title="dojo.addClass" href="addClass.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="addOnUnload.html" title="dojo.addOnUnload"
			 accesskey="N">next</a></li>
            <li >
		      <a href="addClass.html" title="dojo.addClass"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="contents.html" accesskey="U">Dojo</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">dojo.addOnLoad</a><ul>
<li><a class="reference" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="addClass.html"
                                  title="previous chapter">dojo.addClass</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="addOnUnload.html"
                                  title="next chapter">dojo.addOnUnload</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/dojo/addOnLoad.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dojo-addonload">
<span id="id1"></span><h1>dojo.addOnLoad<a class="headerlink" href="#dojo-addonload" title="Permalink to this headline">Â¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Contributed, Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.0</td>
</tr>
</tbody>
</table>
<p>dojo.addOnLoad is a fundamental aspect of using Dojo. Passing addOnLoad a function will register the function to run when the Dom is ready. This differs slightly from document.ready and body.onload in that addOnLoad waits until all dojo.require() (and their recursive dependencies) have loaded before firing.</p>
<p>Sooner or later, every Javascript programmer tries something like this:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="s2">&quot;Sunday&quot;</span><span class="p">){</span>
     <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;Afrobeat&quot;</span><span class="o">;</span>
  <span class="p">}</span>
<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">form</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;musicPrefs&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;other&quot;</span><span class="o">&gt;</span>
<span class="p">...</span>
</pre></div>
</td></tr></table></div>
<p>It doesn't work because the &quot;other&quot; control is not defined yet. You can move the code to the bottom of the page, but that removes the linear nature of HTML. If you're reading the code, you want to zero in on a control, and see the code that influences it close by.</p>
<p>dojo.addOnLoad(...) defers script execution until all the HTML and modules are loaded. So this code:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3
4</pre></td><td class="code"><div class="highlight"><pre><span class="k">function</span> <span class="nx">setAfrobeat</span><span class="p">(){</span>
   <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="o">;</span>
<span class="p">}</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="nx">setAfrobeat</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>conveniently replaces the one above. When the function is small, you may prefer to write it inline:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span>
  <span class="k">function</span><span class="p">(){</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="o">;</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>This is the function literal or anonymous function construct of JavaScript. If it looks really, really wierd to you, take a peek ahead at Functions as Variables for an explanation.</p>
<p>Another use is &quot;embedded onLoad&quot;. We'll define an addOnLoad function (anonymous), and within that function call dojo.require() to load more components, registering a second addOnLoad function. The first will execute very quickly (assuming you are only loading dojo.js), and the second will wait until the package dependencies are complete:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
  <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.Dialog&quot;</span><span class="p">);</span>
  <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.TitlePane&quot;</span><span class="p">);</span>
  <span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
      <span class="c">// dijit.Dialog and friends are ready, create one from a node with id=&quot;bar&quot;</span>
      <span class="k">var</span> <span class="nx">dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dijit</span><span class="p">.</span><span class="nx">Dialog</span><span class="p">({</span> <span class="nx">title</span><span class="o">:</span><span class="s2">&quot;Lazy Loaded&quot;</span> <span class="p">}</span><span class="o">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>If no in-flight XHR activity is found, and all dependencies have been solved, addOnLoad functions fire immediately.</p>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">Â¶</a></h2>
<p>Lets dynamically include code on button press and fire an event once the code is included</p>
<div dojoType="docs.widget.CompoundViewer"><p>The HTML markup is pretty simple, just a button to click on</p>
<div dojoType="docs.widget.CodeViewer" label="A dijit button" lang="html"><pre>&lt;button dojoType=&quot;dijit.form.Button&quot; id=&quot;buttonOne&quot;&gt;Click me!&lt;/button&gt;</pre></div><p>The JavaScript code fires a dojo.require when you click the button.</p>
<div dojoType="docs.widget.CodeViewer" label="The javascript code" lang="javascript"><pre>&lt;script type=&quot;text/javascript&quot;&gt;
dojo.require(&quot;dijit.form.Button&quot;);

// connect to button
dojo.addOnLoad(function(){
  dojo.connect(dojo.byId(&quot;buttonOne&quot;), &quot;onclick&quot;, &quot;loadCode&quot;);
});

function loadCode(){
  alert(&quot;About to dojo.require dijit.layout.BorderContainer. Currently is is: &quot;+dijit.layout.BorderContainer);
  dojo.require(&quot;dijit.layout.BorderContainer&quot;);

  // add a dojo.adOnLoad
  dojo.addOnLoad(function(){
    alert(&quot;This fires after BorderContainer is included. Now it is: &quot;+dijit.layout.BorderContainer);
  });
}

&lt;/script&gt;</pre></div></div></div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>