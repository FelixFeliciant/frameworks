<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dijit.form.DateTextBox &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../../index.html" />
    <link rel="up" title="Dijit" href="../contents.html" />
    <link rel="next" title="dijit.form.DropDownButton" href="DropDownButton.html" />
    <link rel="prev" title="dijit.form.CurrencyTextBox" href="CurrencyTextBox.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../../_static/dojo/dijit/themes/dijit.css";
@import "../../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="DropDownButton.html" title="dijit.form.DropDownButton"
			 accesskey="N">next</a></li>
            <li >
		      <a href="CurrencyTextBox.html" title="dijit.form.CurrencyTextBox"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="../contents.html" accesskey="U">Dijit</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">dijit.form.DateTextBox</a><ul>
<li><a class="reference" href="#introduction">Introduction</a></li>
<li><a class="reference" href="#examples">Examples</a><ul>
<li><a class="reference" href="#declarative-example">Declarative example</a></li>
<li><a class="reference" href="#standard-date-format">Standard Date Format</a></li>
<li><a class="reference" href="#setting-and-retrieving-dates">Setting and Retrieving Dates</a></li>
<li><a class="reference" href="#changing-constraints-on-the-fly">Changing Constraints on the Fly</a></li>
<li><a class="reference" href="#two-digit-year-format">Two-Digit Year Format</a></li>
</ul>
</li>
<li><a class="reference" href="#accessibility">Accessibility</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="CurrencyTextBox.html"
                                  title="previous chapter">dijit.form.CurrencyTextBox</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="DropDownButton.html"
                                  title="next chapter">dijit.form.DropDownButton</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/dijit/form/DateTextBox.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dijit-form-datetextbox">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dijit.form.DateTextBox<a class="headerlink" href="#dijit-form-datetextbox" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.0</td>
</tr>
<tr class="field"><th class="field-name">Authors:</th><td class="field-body">Becky Gibson, Doug Hays, Craig Riecke, Adam Peller</td>
</tr>
<tr class="field"><th class="field-name">Developers:</th><td class="field-body">Doug Hays</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since 0.9</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#dijit-form-datetextbox" id="id2" name="id2">dijit.form.DateTextBox</a><ul>
<li><a class="reference" href="#introduction" id="id3" name="id3">Introduction</a></li>
<li><a class="reference" href="#examples" id="id4" name="id4">Examples</a></li>
<li><a class="reference" href="#accessibility" id="id5" name="id5">Accessibility</a></li>
</ul>
</li>
</ul>
</div>
<p>DateTextBox widgets are easy-to-use date entry controls that allow either typing or choosing a date from any calendar widget.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></a></h2>
<p><tt class="docutils literal"><span class="pre">dijit.form.DateTextBox</span></tt>:</p>
<ul class="simple">
<li>is a <a class="reference" href="../form.html#dijit-form"><em>mapped form control</em></a></li>
<li>validates against locale-specific <em>i18n</em> rules</li>
<li>also validates against developer-provided <tt class="docutils literal"><span class="pre">constraints</span></tt> like <tt class="docutils literal"><span class="pre">min</span></tt>, <tt class="docutils literal"><span class="pre">max</span></tt>, valid days of the week, etc.</li>
</ul>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></a></h2>
<div class="section" id="declarative-example">
<h3>Declarative example<a class="headerlink" href="#declarative-example" title="Permalink to this headline">¶</a></h3>
<div dojoType="docs.widget.CompoundViewer"><div dojoType="docs.widget.CodeViewer" label="" lang="javascript"><pre>&lt;script type=&quot;text/javascript&quot;&gt;
dojo.require(&quot;dijit.form.DateTextBox&quot;);
&lt;/script&gt;</pre></div><div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;input type=&quot;text&quot; name=&quot;date1&quot; id=&quot;date1&quot; value=&quot;2005-12-30&quot;
        dojoType=&quot;dijit.form.DateTextBox&quot;
        required=&quot;true&quot; /&gt;
&lt;label for=&quot;date1&quot;&gt;Drop down Date box. Click inside to display the calendar.&lt;/label&gt;</pre></div></div></div>
<div class="section" id="standard-date-format">
<h3>Standard Date Format<a class="headerlink" href="#standard-date-format" title="Permalink to this headline">¶</a></h3>
<p>One universal problem with specifying dates as text strings is they can be written so many different ways. In Great Britain, &#8220;5/8/2008&#8221; means August 5th where in the U.S. it means May 8th. Fortunately, Dojo respects the cultural conventions so that the date will be properly parsed when interacting with the user.  Routines in the <a class="reference" href="../../dojo/date/locale.html#dojo-date-locale"><em>dojo.date.locale</em></a> package are used against the setting of djConfig.locale or the locale of the user&#8217;s browser to determine the appropriate behavior.</p>
<p>Another problem is that your application may interact with various users in different locales, and the same server interaction is expected to work for all of them. If your widget markup specifies the attribute <tt class="docutils literal"><span class="pre">value='5/8/2008'</span></tt>, how does DateTextBox know what you mean? You could write your application to assume US-English conventions, as Javascript often does, but that programming practice will not be well understood in other parts of the world and may cause problems interacting with other software.  To prevent this ambiguity, DateTextBox uses ISO8601/RFC3339 format <tt class="docutils literal"><span class="pre">yyyy-mm-dd</span></tt> to specify dates when communicating outside the Javascript realm.  This format is both neutral to cultural formatting conventions as well as to time zones. For example:</p>
<ul class="simple">
<li>2007-12-25 means December 25, 2007.</li>
</ul>
<p>ISO formatted date values sort properly as strings and are lighter-weight than Javascript Date objects, which make them convenient for programming.</p>
</div>
<div class="section" id="setting-and-retrieving-dates">
<h3>Setting and Retrieving Dates<a class="headerlink" href="#setting-and-retrieving-dates" title="Permalink to this headline">¶</a></h3>
<p>Dijit uses the ISO format for dates which are specified declaratively in widget markup and also for submission back to the server.  The DateTextBox widget uses a hidden form element with the <em>NAME</em> of the original tag to submit the ISO data; the form element provided for user interaction is an additional form element instantiated only for this purpose.  When you access the DateTextBox value attribute programmatically from the widget using JavaScript, you must use a native Javascript Date object, e.g. new Date(2007, 11, 25) The time portion of the Date object is ignored.</p>
<p>Ideally, your server application will send and receive dates in the ISO standard format.  Dojo recommends it as a best practice, but your data may not conform.  For example when Oracle database processes dates, by default it insists on dd-MMM-yyyy format in English, as in 01-APR-2006.  Perhaps you do not control the database or cannot write a shim to convert the dates server side.  How do you get around it?</p>
<p>To accept dates from the server in this format, you can create your own widget class which overrides the setValue method of DateTextBox. (See <a class="reference" href="../../dijit.html#dijit"><em>dijit</em></a> for details on creating your own widgets). Here&#8217;s an example:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">declare</span><span class="p">(</span><span class="s2">&quot;OracleDateTextBox&quot;</span><span class="o">,</span> <span class="p">[</span><span class="nx">dijit</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">DateTextBox</span><span class="p">]</span><span class="o">,</span>
   <span class="nx">setValue</span><span class="o">:</span> <span class="k">function</span><span class="p">(</span><span class="nx">unparsedValue</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">locale</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
           <span class="nx">unparsedValue</span><span class="o">,</span>
           <span class="p">{</span><span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;date&#39;</span><span class="o">,</span> <span class="nx">datePattern</span><span class="o">:</span> <span class="s1">&#39;dd-MMM-yyyy&#39;</span><span class="p">}</span>
       <span class="p">);</span>
   <span class="p">})</span>
   <span class="c">// more to come...</span>
</pre></div>
</td></tr></table></div>
<p>To do the reverse - writing back to the server in Oracle format - you override the serialize method:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3
4</pre></td><td class="code"><div class="highlight"><pre>   <span class="nx">serialize</span><span class="o">:</span> <span class="k">function</span><span class="p">(</span><span class="nx">d</span><span class="o">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">return</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">locale</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">d</span><span class="o">,</span> <span class="p">{</span><span class="nx">selector</span><span class="o">:</span><span class="s1">&#39;date&#39;</span><span class="o">,</span> <span class="nx">datePattern</span><span class="o">:</span><span class="s1">&#39;dd-MMM-yyyy&#39;</span><span class="p">}).</span><span class="nx">toLowerCase</span><span class="p">();</span>
   <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>TODO: you also have to hard code the 'en' locale, or this could serialize in the wrong language.</p>
<p>In newer Dojo-versions (&gt;=1.2) this has changed, because <em>attr</em> has replaced <em>setValue</em>. Now you can define the data format for external dependencies like this:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><div class="highlight"><pre> <span class="nx">dojo</span><span class="p">.</span><span class="nx">declare</span><span class="p">(</span>
     <span class="s2">&quot;myProject.form.CakeDateTimeTextBox&quot;</span><span class="o">,</span>
     <span class="p">[</span><span class="nx">dijit</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">DateTextBox</span><span class="p">]</span><span class="o">,</span>
     <span class="p">{</span>
         <span class="c">// format 2009-03-15 00:00:00</span>
         <span class="nx">extFormat</span><span class="o">:</span> <span class="p">{</span> <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;dateTime&#39;</span><span class="o">,</span> <span class="nx">datePattern</span><span class="o">:</span><span class="s1">&#39;yyyy-MM-dd&#39;</span><span class="o">,</span> <span class="nx">timePattern</span><span class="o">:</span><span class="s1">&#39;HH:mm:ss&#39;</span> <span class="p">}</span><span class="o">,</span>

         <span class="nx">postCreate</span><span class="o">:</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
             <span class="k">var</span> <span class="nx">rawVal</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">srcNodeRef</span><span class="o">,</span> <span class="s1">&#39;value&#39;</span> <span class="p">);</span>
             <span class="k">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">locale</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">rawVal</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">extFormat</span> <span class="p">);</span>
             <span class="k">this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="s1">&#39;value&#39;</span><span class="o">,</span> <span class="nx">val</span> <span class="p">);</span>
             <span class="k">this</span><span class="p">.</span><span class="nx">inherited</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">);</span>
         <span class="p">}</span><span class="o">,</span>

         <span class="nx">serialize</span><span class="o">:</span> <span class="k">function</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
             <span class="k">return</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">locale</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span> <span class="nx">val</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">extFormat</span> <span class="p">);</span>
         <span class="p">}</span>

     <span class="p">}</span>
 <span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Finally, you can use this new widget class programmatically or declaratively</p>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><pre>1</pre></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">dojoType=</span><span class="s">&quot;OracleDateTextBox&quot;</span> <span class="na">name=</span><span class="s">&quot;mydate&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</td></tr></table></div>
<p>In all cases, the DateTextBox looks and works exactly the same to the user.</p>
<p>One common anti-solution is to set the datePattern constraint:</p>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3</pre></td><td class="code"><div class="highlight"><pre><span class="c">&lt;!-- DOESN&#39;T WORK!!  --&gt;</span>
<span class="nt">&lt;input</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.DateTextBox&quot;</span> <span class="na">name=</span><span class="s">&quot;effectiveDateOfChange&quot;</span>
       <span class="na">id=</span><span class="s">&quot;effectiveDateOfChange&quot;</span> <span class="na">constraints=</span><span class="s">&quot;{datePattern:&#39;dd-MMM-yyyy&#39;}&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Unfortunately, this only affects how the date is parsed and formatted in the box itself. As such, it's not very wise because it forces
people from every country to use the same format, which may be totally unfamiliar. So, bad idea.</p>
<p>TODO: the idea of the code in the book was to make a textbox which used local conventions but communicated to/from the server (only) in this format</p>
</div>
<div class="section" id="changing-constraints-on-the-fly">
<h3>Changing Constraints on the Fly<a class="headerlink" href="#changing-constraints-on-the-fly" title="Permalink to this headline">¶</a></h3>
<p>DateTextBox obeys the constraints you give, much like <a class="reference" href="NumberTextBox.html#dijit-form-numbertextbox"><em>dijit.form.NumberTextBox</em></a>  Sometimes you may need to change these constraints based on user input. To do this, you can set new constraints on the widget, but the catch is you must use JavaScript dates.</p>
<p>TODO: For example, this DateTextBox will not allow you to enter a day before today:</p>
</div>
<div class="section" id="two-digit-year-format">
<h3>Two-Digit Year Format<a class="headerlink" href="#two-digit-year-format" title="Permalink to this headline">¶</a></h3>
<p>TODO: <a class="reference" href="http://dojotoolkit.org/forum/dijit-dijit-0-9/dijit-support/datetextbox-datepattern-constraint-2-digit-year-possible">http://dojotoolkit.org/forum/dijit-dijit-0-9/dijit-support/datetextbox-datepattern-constraint-2-digit-year-possible</a></p>
</div>
</div>
<div class="section" id="accessibility">
<h2><a class="toc-backref" href="#id5">Accessibility<a class="headerlink" href="#accessibility" title="Permalink to this headline">¶</a></a></h2>
<p>See the Accessibility Section in <a class="reference" href="ValidationTextbox.html#dijit-form-validationtextbox"><em>dijit.form.ValidationTextBox</em></a></p>
<p>The calendar popup associated with the DateTextBox is not yet keyboard accessible.  However, the DateTextBox will still meet accessibility requirments as long as the developer provides the validation parameters promptMessage and invalidMessage when creating the DateTextBox.  [TODO: there are default messages; this should not be required]  These messages are implemented in a format that is accessible to all users.</p>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>