<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dijit._Templated &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="up" title="Dijit" href="contents.html" />
    <link rel="next" title="dijit._Widget" href="_Widget.html" />
    <link rel="prev" title="Dijit" href="info.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="_Widget.html" title="dijit._Widget"
			 accesskey="N">next</a></li>
            <li >
		      <a href="info.html" title="Dijit"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="contents.html" accesskey="U">Dijit</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">dijit._Templated</a><ul>
<li><a class="reference" href="#introduction">Introduction</a></li>
<li><a class="reference" href="#usage">Usage</a></li>
<li><a class="reference" href="#the-template">The template</a><ul>
<li><a class="reference" href="#dojoattachpoint">dojoAttachPoint</a></li>
<li><a class="reference" href="#dojoattachevent">dojoAttachEvent</a></li>
<li><a class="reference" href="#wairole-and-waistate">waiRole and waiState</a></li>
<li><a class="reference" href="#containernode">containerNode</a></li>
<li><a class="reference" href="#substitution-variables">Substitution variables</a></li>
</ul>
</li>
<li><a class="reference" href="#widgets-inside-the-template">Widgets inside the Template</a><ul>
<li><a class="reference" href="#id2">dojoAttachPoint</a></li>
<li><a class="reference" href="#id3">dojoAttachEvent</a></li>
</ul>
</li>
<li><a class="reference" href="#templated-particulars">Templated Particulars</a></li>
<li><a class="reference" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="info.html"
                                  title="previous chapter">Dijit</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="_Widget.html"
                                  title="next chapter">dijit._Widget</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/dijit/_Templated.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="dijit-templated">
<span id="id1"></span><h1><a class="toc-backref" href="#id4">dijit._Templated<a class="headerlink" href="#dijit-templated" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.0</td>
</tr>
<tr class="field"><th class="field-name">Project owner:</th><td class="field-body">Bill Keese</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since V0.9</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#dijit-templated" id="id4" name="id4">dijit._Templated</a><ul>
<li><a class="reference" href="#introduction" id="id5" name="id5">Introduction</a></li>
<li><a class="reference" href="#usage" id="id6" name="id6">Usage</a></li>
<li><a class="reference" href="#the-template" id="id7" name="id7">The template</a></li>
<li><a class="reference" href="#widgets-inside-the-template" id="id8" name="id8">Widgets inside the Template</a></li>
<li><a class="reference" href="#templated-particulars" id="id9" name="id9">Templated Particulars</a></li>
<li><a class="reference" href="#see-also" id="id10" name="id10">See also</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id5">Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></a></h2>
<p>dijit._Templated is a mixin for most widgets in dijit.  It takes an HTML template, and creates the widget&#8217;s DOM tree according to that template.  In other words, it implements buildRendering() for you.</p>
<p>Note that the underscore in the name implies not that _Template is a private class, but rather that it&#8217;s a mixin, rather than a widget.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id6">Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></a></h2>
<p>Mixin dijit._Templated when you declare your widget:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre>1
2
3</pre></td><td class="code"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
  <span class="nx">dojo</span><span class="p">.</span><span class="nx">declare</span><span class="p">(</span><span class="s2">&quot;MyWidget&quot;</span><span class="o">,</span> <span class="p">[</span><span class="nx">dijit</span><span class="p">.</span><span class="nx">_Widget</span><span class="o">,</span> <span class="nx">dijit</span><span class="p">.</span><span class="nx">_Templated</span><span class="p">]</span><span class="o">,</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>
<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>and then <em>don't</em> define buildRendering().</p>
</div>
<div class="section" id="the-template">
<h2><a class="toc-backref" href="#id7">The template<a class="headerlink" href="#the-template" title="Permalink to this headline">¶</a></a></h2>
<p>The template is specified in the widget attribute templatePath or templateString, and points to some HTML w/a single root node, with special attributes on the nodes, plus possibly substitution variables, etc.</p>
<p>The tags in the template can have these special attributes, in addition to typical attributes like class:</p>
<blockquote>
<ul class="simple">
<li>dojoAttachPoint</li>
<li>dojoAttachEvent</li>
<li>waiRole</li>
<li>waiState</li>
</ul>
</blockquote>
<div class="section" id="dojoattachpoint">
<h3>dojoAttachPoint<a class="headerlink" href="#dojoattachpoint" title="Permalink to this headline">¶</a></h3>
<p>In the JavaScript of a widget, you often might wish to refer to some of its html template's dom nodes directly. In this case the widget will need to access the &lt;span&gt; with the count in order to change the value.</p>
<p>You might think the widget author could just use ids in the html template, and then dojo.byId() in the widget's js. But if she does, then if two or more widget instances are created, they'll all have the same ids!  Obviously code will blow up then.</p>
<p>Instead, you the widget author do the following:</p>
<ol class="arabic simple">
<li>In your widget template's html, for every node that these variables are supposed to correspond to (eg point to), you add the attribute: dojoAttachPoint=&quot;yourVariableNameHere&quot;.</li>
<li>In your widget's js, you use (without declaring them) variables for these nodes. In this case you will access this.counter.</li>
</ol>
<p>The reason the variables are undeclared is that when the code in _Templated scans the html in step 1, and it finds the variables in the dojoAttachPoint attribute, it adds those variables to your widget class, dynamically.</p>
</div>
<div class="section" id="dojoattachevent">
<h3>dojoAttachEvent<a class="headerlink" href="#dojoattachevent" title="Permalink to this headline">¶</a></h3>
<p>dojoAttachEvent will automatically setup a connection from an event on the DOM node (onclick in this case) to call a method in the widget (in this case increment().</p>
<p>Here's an example of dojoAttachPoint and dojoAttachEvent:</p>
<div dojoType="docs.widget.CompoundViewer"><div dojoType="docs.widget.CodeViewer" label="" lang="javascript"><pre>&lt;script type=&quot;text/javascript&quot;&gt;
        dojo.require(&quot;dijit._Widget&quot;);
        dojo.require(&quot;dijit._Templated&quot;);
        dojo.declare(&quot;FancyCounter&quot;,
                [dijit._Widget, dijit._Templated], {
                        // counter
                        _i: 0,

                        templateString:
                                &quot;&lt;div&gt;&quot; +
                                        &quot;&lt;button dojoAttachEvent='onclick: increment'&gt;press me&lt;/button&gt;&quot; +
                                        &quot;&amp;nbsp; count: &lt;span dojoAttachPoint='counter'&gt;0&lt;/span&gt;&quot; +
                                &quot;&lt;/div&gt;&quot;,

                         increment: function(){
                                this.counter.innerHTML = ++this._i;
                         }
                });
        dojo.require(&quot;dojo.parser&quot;);
&lt;/script&gt;</pre></div><div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;span dojoType=&quot;FancyCounter&quot;&gt;press me&lt;/span&gt;</pre></div></div></div>
<div class="section" id="wairole-and-waistate">
<h3>waiRole and waiState<a class="headerlink" href="#wairole-and-waistate" title="Permalink to this headline">¶</a></h3>
<p>These attributes are for accessibility, and define the role of DOM nodes such as &quot;tree&quot;.   See <em>Creating Accessible Widgets</em> for more information.</p>
</div>
<div class="section" id="containernode">
<h3>containerNode<a class="headerlink" href="#containernode" title="Permalink to this headline">¶</a></h3>
<p>Often a widget declared in markup will have contents, i.e. it will contain some other DOM.   For example:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.Button&quot;</span><span class="nt">&gt;</span>press me<span class="nt">&lt;/button&gt;</span>
</pre></div>
</div>
<p>If the template defines dojoAttachPoint=&quot;containerNode&quot;, the children from the srcNodeRef will be copied to this node.</p>
<p>For example:</p>
<div dojoType="docs.widget.CompoundViewer"><div dojoType="docs.widget.CodeViewer" label="" lang="javascript"><pre>&lt;script&gt;
            dojo.require(&quot;dijit._Widget&quot;);
            dojo.require(&quot;dijit._Templated&quot;);
            dojo.declare(&quot;MyButton&quot;,
                    [dijit._Widget, dijit._Templated], {
                            templateString:
                                &quot;&lt;button dojoAttachPoint='containerNode'&gt;&lt;/button&gt;&quot;
                    });
            dojo.require(&quot;dojo.parser&quot;);
&lt;/script&gt;</pre></div><div dojoType="docs.widget.CodeViewer" label="" lang="html"><pre>&lt;button dojoType=&quot;MyButton&quot;&gt;press me&lt;/button&gt;</pre></div></div></div>
<div class="section" id="substitution-variables">
<h3>Substitution variables<a class="headerlink" href="#substitution-variables" title="Permalink to this headline">¶</a></h3>
<p>A template can also reference substitution variables like ${title}.   ${title} references the title attribute of the widget.</p>
<p>However, this is not recommended, as (due to implementation details) it only handles setting of the title on widget instantiation. In other words, myWidget.attr('title', 'My new title') won't work if you use substitution variables.</p>
</div>
</div>
<div class="section" id="widgets-inside-the-template">
<h2><a class="toc-backref" href="#id8">Widgets inside the Template<a class="headerlink" href="#widgets-inside-the-template" title="Permalink to this headline">¶</a></a></h2>
<p>So what if we want the widget to have a widget inside of the template, as in ...:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;combinedDateTime&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.DateTextBox&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.TimeTextBox&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>When using this template in a directly extended widget class, you will need to set the property widgetsInTemplate: true. Why? Because a widget inside a template requires some recursive parsing, which may be slow if you're drawing thousands of widgets ... especially if there is nothing extra to parse. Therefore, it is false by default.</p>
<p>dijit.Declaration-based widget classes automatically set widgetsInTemplate to true.</p>
<div class="section" id="id2">
<h3>dojoAttachPoint<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>In this case, the dojoAttachPoint becomes a pointer to the sub-widget, not to a DOM node.  For example, with this template:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;combinedDateTime&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.DateTextBox&quot;</span> <span class="na">dojoAttachPoint=</span><span class="s">&quot;start&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.TimeTextBox&quot;</span> <span class="na">dojoAttachPoint=</span><span class="s">&quot;end&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>You can do this in your widget code:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="o">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>dojoAttachEvent<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>dojoAttachEvent also functions to attach a widget event (not a DOM event) on the sub widget to the main widget.  For example, consider InlineEditBox which embeds dijit buttons into it's own template:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;fieldset</span> <span class="na">dojoAttachPoint=</span><span class="s">&quot;editNode&quot;</span> <span class="na">waiRole=</span><span class="s">&quot;presentation&quot;</span> <span class="na">style=</span><span class="s">&quot;position: absolute; visibility:hidden&quot;</span> <span class="na">class=</span><span class="s">&quot;dijitReset dijitInline&quot;</span>
      <span class="na">dojoAttachEvent=</span><span class="s">&quot;onkeypress: _onKeyPress&quot;</span>
      <span class="nt">&gt;&lt;div</span> <span class="na">dojoAttachPoint=</span><span class="s">&quot;editorPlaceholder&quot;</span><span class="nt">&gt;&lt;/div</span>
<span class="nt">      &gt;&lt;span</span> <span class="na">dojoAttachPoint=</span><span class="s">&quot;buttonContainer&quot;</span>
              <span class="nt">&gt;&lt;button</span> <span class="na">class=</span><span class="s">&#39;saveButton&#39;</span> <span class="na">dojoAttachPoint=</span><span class="s">&quot;saveButton&quot;</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.Button&quot;</span> <span class="na">dojoAttachEvent=</span><span class="s">&quot;onClick:save&quot;</span> <span class="na">disabled=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>${buttonSave}<span class="nt">&lt;/button</span>
<span class="nt">              &gt;&lt;button</span> <span class="na">class=</span><span class="s">&#39;cancelButton&#39;</span> <span class="na">dojoAttachPoint=</span><span class="s">&quot;cancelButton&quot;</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.Button&quot;</span> <span class="na">dojoAttachEvent=</span><span class="s">&quot;onClick:cancel&quot;</span><span class="nt">&gt;</span>${buttonCancel}<span class="nt">&lt;/button</span>
<span class="nt">      &gt;&lt;/span</span>
<span class="nt">&gt;&lt;/fieldset&gt;</span>
</pre></div>
</div>
<p>The onClick event on the dijit.form.Button will call InlineEditBox.save().</p>
<p>The widgetsInTemplate feature does not support adding layout widgets as children.  In particular there are issues with startup() and resize() calls to the children.</p>
<p>Also note that a widget's getChildren() method and similar methods will <em>not</em> include the widgets declared in the template, but rather just the widgets inside the containerNode.   This is because the widgets declared in the template are internal objects, effectively hidden from widget users.  In other words, only the developer of the widget knows that it internally contains widgets.</p>
</div>
</div>
<div class="section" id="templated-particulars">
<h2><a class="toc-backref" href="#id9">Templated Particulars<a class="headerlink" href="#templated-particulars" title="Permalink to this headline">¶</a></a></h2>
<p>_Templated used <em>both</em> <tt class="docutils literal"><span class="pre">templateString</span></tt> and <tt class="docutils literal"><span class="pre">templatePath</span></tt>. In cases where the parent widget has defined a <tt class="docutils literal"><span class="pre">templateString</span></tt>, and you wish to define a <tt class="docutils literal"><span class="pre">templatePath</span></tt> in a subclass, you must null the original <tt class="docutils literal"><span class="pre">templateString</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">declare</span><span class="p">(</span><span class="s2">&quot;Thinger&quot;</span><span class="o">,</span> <span class="p">[</span><span class="nx">dijit</span><span class="p">.</span><span class="nx">_Widget</span><span class="o">,</span> <span class="nx">dijit</span><span class="p">.</span><span class="nx">_Templated</span><span class="p">]</span><span class="o">,</span> <span class="p">{</span>
    <span class="c">// parent has a templateString</span>
    <span class="nx">templateString</span><span class="o">:</span><span class="kc">null</span><span class="o">,</span>
    <span class="nx">templatePath</span><span class="o">:</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">moduleUrl</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="o">,</span> <span class="s2">&quot;bar.html&quot;</span><span class="p">)</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Most widgets do <em>not</em> define a <tt class="docutils literal"><span class="pre">templateString</span></tt>. When using a built or released Dijit tree, the build will <tt class="docutils literal"><span class="pre">internStrings</span></tt>, converting the contents of the templatePath into a templateString variable in the built code.</p>
<p><em>note:</em> define <tt class="docutils literal"><span class="pre">templateString</span></tt> <em>first</em>, should you need to define both at all. If you define the path first, and supply a string, that string will always be used, and will throw errors after running through the build system.</p>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id10">See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></a></h2>
<ul class="simple">
<li><a class="reference" href="../quickstart/writingWidgets.html#quickstart-writingwidgets"><em>Writing Widgets</em></a></li>
</ul>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>