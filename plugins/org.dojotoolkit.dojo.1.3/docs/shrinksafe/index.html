<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ShrinkSafe &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="next" title="About the new Docu Wiki" href="../about/index.html" />
    <link rel="prev" title="Dojo Documentation Tools" href="../util/doctools.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="../about/index.html" title="About the new Docu Wiki"
			 accesskey="N">next</a></li>
            <li >
		      <a href="../util/doctools.html" title="Dojo Documentation Tools"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">ShrinkSafe</a><ul>
<li><a class="reference" href="#getting-the-code">Getting the Code</a></li>
<li><a class="reference" href="#usage">Usage</a></li>
<li><a class="reference" href="#developer-information">Developer information</a></li>
<li><a class="reference" href="#known-bugs">Known bugs</a></li>
<li><a class="reference" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../util/doctools.html"
                                  title="previous chapter">Dojo Documentation Tools</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../about/index.html"
                                  title="next chapter">About the new Docu Wiki</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/shrinksafe/index.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="shrinksafe">
<span id="shrinksafe-index"></span><h1><a class="toc-backref" href="#id1">ShrinkSafe<a class="headerlink" href="#shrinksafe" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">2.0</td>
</tr>
<tr class="field"><th class="field-name">Project owner:</th><td class="field-body">Alex Russell</td>
</tr>
<tr class="field"><th class="field-name">Available:</th><td class="field-body">since V0.4</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#shrinksafe" id="id1" name="id1">ShrinkSafe</a><ul>
<li><a class="reference" href="#getting-the-code" id="id2" name="id2">Getting the Code</a></li>
<li><a class="reference" href="#usage" id="id3" name="id3">Usage</a></li>
<li><a class="reference" href="#developer-information" id="id4" name="id4">Developer information</a></li>
<li><a class="reference" href="#known-bugs" id="id5" name="id5">Known bugs</a></li>
<li><a class="reference" href="#see-also" id="id6" name="id6">See also</a></li>
</ul>
</li>
</ul>
</div>
<p>ShrinkSafe is a standalone Java-based JavaScript compressor which utilizes Rhino to parse code and safely shorten the results.  ShrinkSafe renames local references to short names prefixed with an underscore.  This saves bytes on the wire and also provides some obfuscation of the code.  It also eliminates whitespace and comments when generating the new code.  Global references and property names remain unchanged such that external references to the compressed code should be safe.</p>
<div class="section" id="getting-the-code">
<h2><a class="toc-backref" href="#id2">Getting the Code<a class="headerlink" href="#getting-the-code" title="Permalink to this headline">¶</a></a></h2>
<p>While ShrinkSafe is available as an <a class="reference" href="http://shrinksafe.dojotoolkit.org/">online service</a> and part of the tool chain for the <a class="reference" href="build/index">Dojo Build system</a>, it is also possible to use ShrinkSafe independent of Dojo.</p>
<p>ShrinkSafe comes bundled with the <tt class="docutils literal"><span class="pre">-src</span></tt> releases of the Dojo Toolkit in the folder <tt class="docutils literal"><span class="pre">util/shrinksafe/</span></tt>. Alternately, you can download ShrinkSafe standalone from <a class="reference" href="http://download.dojotoolkit.org/current-stable/">http://download.dojotoolkit.org</a> by selecting the <tt class="docutils literal"><span class="pre">-shrinksafe</span></tt> archive.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id3">Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></a></h2>
<p>Shrinksafe can operate on a list of file or urls, or if none are specified it will use stdin.  Output goes to stdout, which may be redirected
to a file or process.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">java</span> <span class="o">-</span><span class="nx">jar</span> <span class="nx">shrinksafe</span><span class="p">.</span><span class="nx">jar</span> <span class="nx">bigcode</span><span class="p">.</span><span class="nx">js</span> <span class="o">&gt;</span> <span class="nx">smallercode</span><span class="p">.</span><span class="nx">js</span>   <span class="nx">Compresses</span> <span class="nx">bigcode</span><span class="p">.</span><span class="nx">js</span> <span class="nx">to</span> <span class="nx">smallercode</span><span class="p">.</span><span class="nx">js</span>

<span class="nx">java</span> <span class="o">-</span><span class="nx">jar</span> <span class="nx">shrinksafe</span><span class="p">.</span><span class="nx">jar</span> <span class="nx">file1</span><span class="p">.</span><span class="nx">js</span> <span class="nx">file2</span><span class="p">.</span><span class="nx">js</span> <span class="nx">file3</span><span class="p">.</span><span class="nx">js</span> <span class="o">&gt;</span> <span class="nx">combined</span><span class="p">.</span><span class="nx">js</span>   <span class="nx">Compresses</span> <span class="nx">three</span> <span class="nx">files</span> <span class="nx">into</span> <span class="nx">one</span>

<span class="nx">mygeneratorscript</span> <span class="o">|</span> <span class="nx">java</span> <span class="o">-</span><span class="nx">jar</span> <span class="nx">shrinksafe</span><span class="p">.</span><span class="nx">jar</span>

<span class="nx">java</span> <span class="o">-</span><span class="nx">jar</span> <span class="nx">shrinksafe</span><span class="p">.</span><span class="nx">jar</span> <span class="nx">http</span><span class="o">://</span><span class="nx">myhost</span><span class="sr">/mypath/</span><span class="nx">foo</span><span class="p">.</span><span class="nx">js</span> <span class="o">&gt;</span> <span class="nx">bar</span><span class="p">.</span><span class="nx">js</span>

<span class="nx">java</span> <span class="o">-</span><span class="nx">jar</span> <span class="nx">shrinksafe</span><span class="p">.</span><span class="nx">jar</span> <span class="o">-?</span>   <span class="nx">Get</span> <span class="nx">the</span> <span class="nx">usage</span> <span class="nx">message</span> <span class="k">with</span> <span class="nx">information</span> <span class="nx">on</span> <span class="nx">optional</span> <span class="nx">arguments</span><span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="developer-information">
<h2><a class="toc-backref" href="#id4">Developer information<a class="headerlink" href="#developer-information" title="Permalink to this headline">¶</a></a></h2>
<p>ShrinkSafe has its own jar file, <tt class="docutils literal"><span class="pre">shrinksafe.jar</span></tt>, which utilizes an unmodified Rhino jar, <tt class="docutils literal"><span class="pre">js.jar</span></tt>.  Note that the linkage requires the same version of Rhino used to build the shrinksafe.jar.  In versions prior to Dojo 1.3, ShrinkSafe was bundled into Rhino by way of patch, and shipped as <tt class="docutils literal"><span class="pre">custom_rhino.jar</span></tt>.</p>
</div>
<div class="section" id="known-bugs">
<h2><a class="toc-backref" href="#id5">Known bugs<a class="headerlink" href="#known-bugs" title="Permalink to this headline">¶</a></a></h2>
<ul class="simple">
<li>Shrinksafe removes comments containing IE's propietary conditional compilation code <a class="reference" href="http://bugs.dojotoolkit.org/ticket/2298">ticket #2298</a></li>
<li>Forward references are not always resolved properly.  See <a class="reference" href="http://bugs.dojotoolkit.org/ticket/3241">ticket #3241</a></li>
<li>ShrinkSafe appears to not handle '$super' in this code.  See <a class="reference" href="http://bugs.dojotoolkit.org/ticket/5436">ticket #5436</a></li>
</ul>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id6">See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></a></h2>
<ul class="simple">
<li><a class="reference" href="../build/index.html#build-index"><em>Dojo Builds</em></a></li>
</ul>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>