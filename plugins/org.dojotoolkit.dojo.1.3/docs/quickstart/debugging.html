<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Debugging Tutorial &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="up" title="Quickstart" href="contents.html" />
    <link rel="next" title="Functions used Everywhere" href="dojo-basics.html" />
    <link rel="prev" title="Datastores and Dojo" href="data.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="dojo-basics.html" title="Functions used Everywhere"
			 accesskey="N">next</a></li>
            <li >
		      <a href="data.html" title="Datastores and Dojo"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="contents.html" accesskey="U">Quickstart</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">Debugging Tutorial</a><ul>
<li><a class="reference" href="#use-firebug-or-firebug-lite">Use Firebug or Firebug Lite</a></li>
<li><a class="reference" href="#faulty-dojo-require-s-and-the-firebug-console">Faulty dojo.require&#8217;s and the Firebug Console</a></li>
<li><a class="reference" href="#errors-in-dojo-method-and-dojo-event-code">Errors In Dojo/Method and Dojo/Event Code</a></li>
<li><a class="reference" href="#method-1-logging">Method 1: Logging</a></li>
<li><a class="reference" href="#method-2-the-debugger-statement">Method 2: The &#8220;debugger&#8221; Statement</a></li>
<li><a class="reference" href="#to-follow-the-dojo-require-trail-use-dojo-locally">To Follow The dojo.require Trail, Use Dojo Locally</a></li>
<li><a class="reference" href="#that-doesn-t-look-right-dom-inspection">That Doesn&#8217;t Look Right ... DOM Inspection</a></li>
<li><a class="reference" href="#debugging-external-classes-with-debugatallcosts">Debugging External Classes With debugAtAllCosts</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="data.html"
                                  title="previous chapter">Datastores and Dojo</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="dojo-basics.html"
                                  title="next chapter">Functions used Everywhere</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/quickstart/debugging.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="debugging-tutorial">
<span id="quickstart-debugging"></span><h1>Debugging Tutorial<a class="headerlink" href="#debugging-tutorial" title="Permalink to this headline">¶</a></h1>
<p>Dojo is very lean and speedy, and uses some very clever tricks to save memory and time. The downside: Dojo does not contain much error trapping, which would bloat and slow down the code. If your code is not behaving, some of the resulting errors can look mighty puzzling at first.</p>
<p>No worries! Here are a few tips to make you a confident, successful bug finder. Knowing these ahead of time will make your Dojo learning curve less steep.</p>
<div class="section" id="use-firebug-or-firebug-lite">
<h2>Use Firebug or Firebug Lite<a class="headerlink" href="#use-firebug-or-firebug-lite" title="Permalink to this headline">¶</a></h2>
<p>We can&#8217;t stress this enough. Firebug, an open source debugging extension for Firefox, is &#8216;&#8217;essential&#8217;&#8217; for JavaScript, HTML and CSS debugging. You can download it from the <a class="reference" href="http://getfirebug.com">Firebug web site</a>.</p>
<p>Not a Firefox user? You may want to consider switching, at least for development work. One of Dojo&#8217;s virtues is its hiding of cross-platform differences. So the more you rely on it, the more your code will be portable, and the less difference your development browser choice matters.</p>
<p>Still not convinced? That&#8217;s OK too. If you use Internet Explorer or Safari, you can use the Firebug Lite library, bundled with Dojo. This gives you some of the logging and command line features of Firebug. It&#8217;s not a full emulation, but it&#8217;s a fairly good alternative and is fully API-compatible.</p>
<p>To use Firebug Lite, you must include the isDebug config parameter like so:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://o.aolcdn.com/dojo/1.0.0//dojo/dojo.js&quot;</span>
        <span class="na">djConfig=</span><span class="s">&quot;parseOnLoad: true, isDebug: true&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>This parameter has no effect on Firefox browsers with Firebug already present. So including this parameter makes your debugging code usable in IE, Safari, and Firefox with no changes.</p>
</div>
<div class="section" id="faulty-dojo-require-s-and-the-firebug-console">
<h2>Faulty dojo.require's and the Firebug Console<a class="headerlink" href="#faulty-dojo-require-s-and-the-firebug-console" title="Permalink to this headline">¶</a></h2>
<p>The following code has a subtle bug:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;</span>
<span class="cp">            &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>Fix me!<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
      <span class="k">@import</span> <span class="s2">&quot;http://o.aolcdn.com/dojo/1.0.0/dijit/themes/tundra/tundra.css&quot;</span><span class="p">;</span>
        <span class="k">@import</span> <span class="s2">&quot;http://o.aolcdn.com/dojo/1.0.0/dojo/resources/dojo.css&quot;</span>
    <span class="nt">&lt;/style&gt;</span>
      <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://o.aolcdn.com/dojo/1.0.0/dojo/dojo.js&quot;</span>
              <span class="na">djConfig=</span><span class="s">&quot;parseOnLoad: true, isDebug: true&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
              <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojo.parser&quot;</span><span class="p">);</span>
              <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.form.Textbox&quot;</span><span class="p">);</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">&quot;tundra&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;form&gt;</span>
What&#39;s the 411? <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">size=</span><span class="s">&quot;20&quot;</span> <span class="na">name=</span><span class="s">&quot;info&quot;</span>  <span class="na">dojoType=</span><span class="s">&quot;dijit.form.TextBox&quot;</span>
           <span class="na">trim=</span><span class="s">&quot;true&quot;</span> <span class="na">propercase=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;&lt;br&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Without Firebug, this code may pop up an unhelpful dialog box (IE) or display nothing (Firefox). In either case the textbox doesn't look right. You check this by entering a lowercase name and tabbing out of the box ... the propercase attribute should capitalize the first letter. It doesn't.</p>
<p>With Firebug the error is easier to spot. First, there's an indicator at the bottom right hand corner.</p>
<p>[inline:debugging1.png]</p>
<p>You click on the &quot;1 Error&quot; message and the Firebug console pops up:</p>
<p>[inline:debugging2.png]</p>
<p>Looking back at your code, you notice the capitalization on &quot;Textbox&quot; in the dojo.require is wrong. That's a common mistake, but easily fixed. It's also common to forget the dojo.require, or to misspell the class in the dojoType attribute. In each case, Firebug will set you straight.</p>
<p>Firebug Lite will give you a similar console, but it will appear naturally at the bottom of your browser window. To turn it off, you must set the isDebug flag to false and run the page again.</p>
</div>
<div class="section" id="errors-in-dojo-method-and-dojo-event-code">
<h2>Errors In Dojo/Method and Dojo/Event Code<a class="headerlink" href="#errors-in-dojo-method-and-dojo-event-code" title="Permalink to this headline">¶</a></h2>
<p>The following code has an error:</p>
<div class="highlight-python"><pre>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
            "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Fix me!&lt;/title&gt;
    &lt;style type="text/css"&gt;
        @import "http://o.aolcdn.com/dojo/1.0.0/dijit/themes/tundra/tundra.css";
        @import "http://o.aolcdn.com/dojo/1.0.0/dojo/resources/dojo.css"
    &lt;/style&gt;
    &lt;script type="text/javascript" src="http://o.aolcdn.com/dojo/1.0.0/dojo/dojo.xd.js"
            djConfig="parseOnLoad: true"&gt;&lt;/script&gt;
    &lt;script type="text/javascript"&gt;
        dojo.require("dojo.parser");
        dojo.require("dijit.form.Button");
        var newWidth = '200px';
    &lt;/script&gt;
&lt;/head&gt;
&lt;body class="tundra"&gt;
&lt;div dojoType="dijit.form.Button"&gt;
   Click to break!
   &lt;script type="dojo/event" event="onClick"&gt;
      this.domNode.style.width = dojo.newWidth;
   &lt;/script&gt;
&lt;/div&gt;
&lt;/html&gt;</pre>
</div>
<p>But when you look at the console, there's no apparent error. If you were programming in other languages, you might use a debugger and set a breakpoint on the &quot;this.domNode&quot; line. Firebug's debugger let's you do that, but not on this particular code. Scripts of type &quot;dojo/event&quot; and &quot;dojo/method&quot; are compiled and interpreted differently than &quot;text/javascript&quot; ones. But there are a couple of alternate debugging methods.</p>
</div>
<div class="section" id="method-1-logging">
<h2>Method 1: Logging<a class="headerlink" href="#method-1-logging" title="Permalink to this headline">¶</a></h2>
<p>The first method is ''logging'', and if you've used modern logging tools like log4j you'll find it familiar. The idea is to write trace messages to a log which you can then use to find variable values or the last executed bit of code.</p>
<p>Why not just use alert() ? The trusty JavaScript alert() is a favorite debugging tool, but it suffers from the following problems:</p>
<blockquote>
<ul class="simple">
<li>If you have many alerts, it's annoying to keep clicking [OK]</li>
<li>Too much text can make the dialog box overflow the screen</li>
<li>You must remember to remove every alert() before release</li>
<li>alert() in a tight loop might make it impossible to stop without killing the browser process</li>
<li>You cannot easily print object contents or arrays</li>
</ul>
</blockquote>
<p>Clearly alert's just not powerful enough. In Dojo logging, you can associate messages with severity, just like in log4j. The following code illustrates the five severity levels:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Nothing happening&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s2">&quot;Checking to make sure nothing happened&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;Something might happen.&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s2">&quot;Something happened, but it&#39;s no big deal.&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Cough cough!&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>In the Firebug console, the messages will appear like this:</p>
<p>[inline:firebug_logging.png]</p>
<p>In IE, they will appear like this:</p>
<p>[inline:firebug_ie_capture.png]</p>
<p>Another useful method, console.dir() dumps variable contents to the screen. While console.log works fine for strings and integers, console.dir prints more complex variables - objects, arrays, arrays of objects, or whatever. For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">([</span>
   <span class="p">{</span><span class="nx">attribute</span><span class="o">:</span> <span class="s2">&quot;last_name&quot;</span><span class="o">,</span> <span class="nx">sortDescending</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span><span class="o">,</span>
   <span class="p">{</span><span class="nx">attribute</span><span class="o">:</span> <span class="s2">&quot;last_name&quot;</span><span class="o">,</span> <span class="nx">sortDescending</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>produces:</p>
<p>[inline:firebug_logging2.png]</p>
<p>So in our example above, we write:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">console</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;dojo.newWidth is&quot;</span> <span class="o">+</span> <span class="n">dojo</span><span class="o">.</span><span class="n">newWidth</span><span class="p">);</span>
<span class="n">this</span><span class="o">.</span><span class="n">domNode</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">dojo</span><span class="o">.</span><span class="n">newWidth</span><span class="p">;</span>
</pre></div>
</div>
<p>Running this, we quickly find that dojo.newWidth is undefined. Maybe we spelled it wrong? To quickly find out, we change the debugging statement to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">console</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="s">&quot;dojo is&quot;</span> <span class="o">+</span> <span class="n">dojo</span><span class="p">);</span>
<span class="n">this</span><span class="o">.</span><span class="n">domNode</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">dojo</span><span class="o">.</span><span class="n">newWidth</span><span class="p">;</span>
</pre></div>
</div>
<p>Nope, there's no property in dojo that looks like newWidth. Finally, we spot our error and change the right hand side to &quot;newWidth.&quot; Case closed.</p>
</div>
<div class="section" id="method-2-the-debugger-statement">
<h2>Method 2: The &quot;debugger&quot; Statement<a class="headerlink" href="#method-2-the-debugger-statement" title="Permalink to this headline">¶</a></h2>
<p>Alternatively you can set a &quot;poor person's breakpoint&quot; in the code. Just insert the debugger; statement, which is a legal JavaScript reserved word.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">debugger</span><span class="p">;</span>
<span class="n">this</span><span class="o">.</span><span class="n">domNode</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">dojo</span><span class="o">.</span><span class="n">newWidth</span><span class="p">;</span>
</pre></div>
</div>
<p>This statement stops the code and brings you to a Firebug command prompt. It appears the code has stopped at ... huh?</p>
<p>[inline:debugging4.png]</p>
<p>That's a side effect of running dojo/event code. The breakpoints don't seem correct at all.</p>
<p>But just click the Console tab and now you can examine variables or execute just about any JavaScript you want. In this case, we look at the dojo.newWidth property, which has nothing in it. But &quot;dojo&quot; does and we examine it by console.dir(dojo). Basically all the logging features of method 1 are available to type here.</p>
<p>[inline:debugging3.png]</p>
</div>
<div class="section" id="to-follow-the-dojo-require-trail-use-dojo-locally">
<h2>To Follow The dojo.require Trail, Use Dojo Locally<a class="headerlink" href="#to-follow-the-dojo-require-trail-use-dojo-locally" title="Permalink to this headline">¶</a></h2>
<p>Since that code is now running, we try a minor variant which sets the button to blue:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;</span>
<span class="cp">            &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>Fix me!<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
        <span class="k">@import</span> <span class="s2">&quot;http://o.aolcdn.com/dojo/1.0.0/dijit/themes/tundra/tundra.css&quot;</span><span class="p">;</span>
        <span class="k">@import</span> <span class="s2">&quot;http://o.aolcdn.com/dojo/1.0.0/dojo/resources/dojo.css&quot;</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://o.aolcdn.com/dojo/1.0.0/dojo/dojo.xd.js&quot;</span>
            <span class="na">djConfig=</span><span class="s">&quot;parseOnLoad: true&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojo.parser&quot;</span><span class="p">);</span>
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.form.Button&quot;</span><span class="p">);</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">&quot;tundra&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;div</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.Button&quot;</span><span class="nt">&gt;</span>
   Click to break!
   <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;dojo/event&quot;</span> <span class="na">event=</span><span class="s">&quot;onClick&quot;</span><span class="nt">&gt;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">domNode</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">Color</span><span class="p">.</span><span class="nx">named</span><span class="p">.</span><span class="nx">aliceblue</span><span class="o">;</span>
   <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>You check the console ... no errors there. But that dojo.Color.named.aliceblue is a little questionable. You know that dojo.colors needs to be included, but you thought dijit.form.Button already did that.</p>
<p>You can find out for sure by using a local copy of Dojo. CDN Dojo is very quiet about the modules it loads. Local Dojo is very noisy. So, assuming our local copy of Dojo is installed on the web server underneath /dojoroot, the following change:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
        <span class="k">@import</span> <span class="s2">&quot;http://o.aolcdn.com/dojo/1.0.0/dijit/themes/tundra/tundra.css&quot;</span><span class="p">;</span>
        <span class="k">@import</span> <span class="s2">&quot;http://o.aolcdn.com/dojo/1.0.0/dojo/resources/dojo.css&quot;</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://o.aolcdn.com/dojo/1.0.0/dojo/dojo.xd.js&quot;</span>
            <span class="na">djConfig=</span><span class="s">&quot;parseOnLoad: true&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>Yields the following on the console</p>
<p>[inline:debugging5.png]</p>
<p>You see every Dojo Core and Dijit Component loaded. Sure enough, dojo.colors is not in the list, so we add a dojo.require statement</p>
</div>
<div class="section" id="that-doesn-t-look-right-dom-inspection">
<h2>That Doesn't Look Right ... DOM Inspection<a class="headerlink" href="#that-doesn-t-look-right-dom-inspection" title="Permalink to this headline">¶</a></h2>
<p>Unfortunately, that doesn't fix the problem either. When styling errors occur, it's a good time to use Firebug's DOM Inspector. You can think of it as View Source on steroids.</p>
<blockquote>
<ul class="simple">
<li>It displays the ''current'' DOM tree, not the one initially loaded (which is what View Source shows)</li>
<li>You can examine the DOM properties of nodes by inspecting them - that is, pressing Inspect and pointing</li>
</ul>
</blockquote>
<p>So we click Inspect and point at the screen button</p>
<p>[inline:debugging6.png]</p>
<p>The right-hand side of the console tells what styles and style rules are applied to this class. Crossed-off lines are styles that have been overriden. Very nice!</p>
</div>
<div class="section" id="debugging-external-classes-with-debugatallcosts">
<h2>Debugging External Classes With debugAtAllCosts<a class="headerlink" href="#debugging-external-classes-with-debugatallcosts" title="Permalink to this headline">¶</a></h2>
<p>dojo/method and dojo/event scripts are good for short, non-reusable snippets of code. But when you start building reusable components, you'll be storing your code into Dojo-declared classes instead. The good news is the more you make this switch, the easier your debugging task will be.</p>
<p>So here's a piece of HTML code and a reusable Dojo-based widget:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;</span>
<span class="cp">            &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>Goolica Tax Form<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
        <span class="k">@import</span> <span class="s2">&quot;/dojoroot/dijit/themes/tundra/tundra.css&quot;</span><span class="p">;</span>
        <span class="k">@import</span> <span class="s2">&quot;/dojoroot/dojo/resources/dojo.css&quot;</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/dojoroot/dojo/dojo.js&quot;</span>
            <span class="na">djConfig=</span><span class="s">&quot;parseOnLoad: true&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojo.parser&quot;</span><span class="p">);</span>
        <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojobook.online-book.debugging.BuggyWidget&quot;</span><span class="p">);</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">&quot;tundra&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">dojoType=</span><span class="s">&quot;dojobook.online-book.debugging.BuggyWidget&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><pre>dojo.provide("dojobook.online-book.debugging.BuggyWidget");
dojo.require("dijit._Widget");
dojo.declare(
"dojobook.online-book.debugging.BuggyWidget",
[dijit._Widget],
{
   postCreate: function() {
      dojo.nonExistentMethod();
   }
});</pre>
</div>
<p>Running this code, you will see an error appear, but it's nowhere near the right location:</p>
<p>[inline:debugging8.png]</p>
<p>But by simply setting the debugAtAllCosts flag to true:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/dojoroot/dojo/dojo.js&quot;</span>
            <span class="na">djConfig=</span><span class="s">&quot;parseOnLoad: true, debugAtAllCosts: true&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>the displayed error location will now be correct:</p>
<p>[inline:debugging7.png]</p>
<p>'''Important!''' you should always remove debugAtAllCosts from production code. It slows down the client unnecessarily. Rather than manually inserting and removing them, I like to delegate that job to a server side language like PHP:</p>
<div class="highlight-python"><pre>&lt;?php
$djConfig     = $inProduction ? "parseOnLoad: true" : "parseOnLoad: true, debugAtAllCosts: true";
$loadLocation = $inProduction ? "http://o.aolcdn.com/dojo/1.0.0" : "/dojoroot";
$useXd        = $inProduction ? ".xd" : "";
?&gt;
    &lt;style type="text/css"&gt;
        @import "&lt;?= $loadLocation ?&gt;/dijit/themes/tundra/tundra.css";
        @import "&lt;?= $loadLocation ?&gt;/dojo/resources/dojo.css"
    &lt;/style&gt;
    &lt;script type="text/javascript" src="&lt;?= $loadLocation ?&gt;/dojo/dojo&lt;?= $useXd ?&gt;.js"
            djConfig="&lt;?= $djConfig ?&gt;"&gt;&lt;/script&gt;</pre>
</div>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>