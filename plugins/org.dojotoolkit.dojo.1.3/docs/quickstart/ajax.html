<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>AJAX and Dojo &mdash; Dojo Toolkit v1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="Dojo Toolkit v1.3.0 documentation" href="../index.html" />
    <link rel="up" title="Quickstart" href="contents.html" />
    <link rel="next" title="Arrays and Dojo" href="arrays.html" />
    <link rel="prev" title="Animations with Dojo" href="Animation.html" />
<script type="text/javascript">
	var djConfig = {
		parseOnLoad:true, 
		isDebug: false
	}
</script>
<script type="text/javascript" src="../_static/dojo/dojo/dojo.js"></script>
<style type="text/css">
@import "../_static/dojo/dijit/themes/dijit.css";
@import "../_static/dojo/dijit/themes/nihilo/nihilo.css";
@import "../_static/dojo/docs/widget/resources/CodeViewer.css";
@import "../_static/css/layout.css";
</style>

  </head>
  <body>  

    <div class="document">
	<div id="container">
      <div id="header">
	<div class="container">
		<div id="navHeader">
		  <ul>
		    <li><a href="../index.html">home</a> |</li>
            <li style="margin-right: 10px">
		      <a href="arrays.html" title="Arrays and Dojo"
			 accesskey="N">next</a></li>
            <li >
		      <a href="Animation.html" title="Animations with Dojo"
			 accesskey="P">previous</a> |</li>
		    <li><a href="../contents.html">Dojo Toolkit v1.3.0 documentation</a> &raquo;</li>
		      <li><a href="contents.html" accesskey="U">Quickstart</a> &raquo;</li> 
		  </ul>
		</div>
		<div id="searchHeader">
		    <div class="searchContainer">
		        <form class="search" action="../search.html" method="get">
                    <input class="textInput" type="text" name="q" size="18" />
                    <input class="buttonInput" type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
		    </div>
		</div>
	</div>
      </div>
      <div class="content">
	<div id="content">
		  <div id="contentRight">
			  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference" href="">AJAX and Dojo</a><ul>
<li><a class="reference" href="#xhr-options">XHR Options</a></li>
<li><a class="reference" href="#xhr-callbacks">XHR Callbacks</a></li>
<li><a class="reference" href="#dojo-xhrget">dojo.xhrGet</a></li>
<li><a class="reference" href="#dojo-xhrpost">dojo.xhrPost</a></li>
<li><a class="reference" href="#dojo-xhrput">dojo.xhrPut</a></li>
<li><a class="reference" href="#dojo-xhrdelete">dojo.xhrDelete</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="Animation.html"
                                  title="previous chapter">Animations with Dojo</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="arrays.html"
                                  title="next chapter">Arrays and Dojo</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/quickstart/ajax.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
		  </div>
		  <div id="contentLeft">
		    <div class="bodywrapper">
		      <div class="body">
			
  <div class="section" id="ajax-and-dojo">
<span id="quickstart-ajax"></span><h1><a class="toc-backref" href="#id1">AJAX and Dojo<a class="headerlink" href="#ajax-and-dojo" title="Permalink to this headline">¶</a></a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.0</td>
</tr>
<tr class="field"><th class="field-name">Authors:</th><td class="field-body">Nikolai Onken, Craig Riecke</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#ajax-and-dojo" id="id1" name="id1">AJAX and Dojo</a><ul>
<li><a class="reference" href="#xhr-options" id="id2" name="id2">XHR Options</a></li>
<li><a class="reference" href="#xhr-callbacks" id="id3" name="id3">XHR Callbacks</a></li>
<li><a class="reference" href="#dojo-xhrget" id="id4" name="id4">dojo.xhrGet</a></li>
<li><a class="reference" href="#dojo-xhrpost" id="id5" name="id5">dojo.xhrPost</a></li>
<li><a class="reference" href="#dojo-xhrput" id="id6" name="id6">dojo.xhrPut</a></li>
<li><a class="reference" href="#dojo-xhrdelete" id="id7" name="id7">dojo.xhrDelete</a></li>
</ul>
</li>
</ul>
</div>
<p>Ajax has been a buzzword around for some time now (as far as you could call some time a lot of time ;) ) and is one of the concepts which have changed the development for the web quite drastically.</p>
<p>Dojo provides a solid set of battle-tested XHR wrapper functions to allow you to build Ajax interactions with confidence, use a unified API, and handle forms with ease. These APIs are built into Dojo Base, so you can use them in any page that includes dojo.js. Read on to learn how easy it is to build powerful Ajax interactions with Dojo.</p>
<p>The XMLHTTP request object (XHR for short) is one of the basic building blocks for constructing responsive Ajax-drive interactions. By allowing you to retrieve data on the user&#8217;s behalf without refreshing the whole page the XHR object provides tremendous, but cross-browser XHR usage is beset by memory leaks, divergent APIs, a lack of built-in form encoding from JavaScript, and painful corner cases when de-serializing response data.</p>
<div class="section" id="xhr-options">
<h2><a class="toc-backref" href="#id2">XHR Options<a class="headerlink" href="#xhr-options" title="Permalink to this headline">¶</a></a></h2>
<p>All <cite>XHR</cite> functions follow the same pattern in the <cite>property-bag</cite> configuration options, passed to whichever function is called. They include:</p>
<ul class="simple">
<li>url - the endpoint to connect to and load data from. This must be on the same host and port as the serving page, a security limitation of XHR.</li>
<li>handleAs - describes which formatter to use on the incoming data. Defaults to &#8216;text&#8217;, so any response data comes back as a plain string. Available options out of the box are: &#8220;json&#8221; (to convert the data to a JSON object), &#8220;javascript&#8221; (to load and execute JS fragments), &#8220;json-comment-optional&#8221; (to deprecate warnings about the poor security of client-side JSON parsing) and xml.</li>
<li>timeout - a time in MS to wait before giving up the XHR call, and throwing an error to the error callback.</li>
<li>sync - a boolean to determine if the XHR call should be synchronous or asynchronous. Setting sync:true will cause the browser to stop the chain of execution until the data is returned. Defaults to <tt class="docutils literal"><span class="pre">false</span></tt>.</li>
<li>form - a DOM Node of a <tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> element, or a string ID of a <tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> element, used to collect data to be sent along with the request. The form is passed through <a class="reference" href="../dojo/formToObject.html#dojo-formtoobject"><em>dojo.formToObject</em></a> and is mixed into the content: attribute of the XHR call</li>
<li>content - an object to be sent along with</li>
</ul>
<p>Example usage:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></td><td class="code"><div class="highlight"><pre><span class="c">// post some data, ignore the response:</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">xhrPost</span><span class="p">({</span>
    <span class="nx">form</span><span class="o">:</span> <span class="s2">&quot;someFormId&quot;</span><span class="o">,</span> <span class="c">// read the url: from the action=&quot;&quot; of the &lt;form&gt;</span>
    <span class="nx">timeout</span><span class="o">:</span> <span class="mi">3000</span><span class="o">,</span> <span class="c">// give up after 3 seconds</span>
    <span class="nx">content</span><span class="o">:</span> <span class="p">{</span> <span class="nx">part</span><span class="o">:</span><span class="s2">&quot;one&quot;</span><span class="o">,</span> <span class="nx">another</span><span class="o">:</span><span class="s2">&quot;part&quot;</span> <span class="p">}</span> <span class="c">// creates ?part=one&amp;another=part with GET, Sent as POST data when using xhrPost</span>
<span class="p">});</span>

<span class="c">// get some data, convert to JSON</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">xhrGet</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span><span class="s2">&quot;data.json&quot;</span><span class="o">,</span>
    <span class="nx">handleAs</span><span class="o">:</span><span class="s2">&quot;json&quot;</span><span class="o">,</span>
    <span class="nx">load</span><span class="o">:</span> <span class="k">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">data</span><span class="p">){</span>
           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="o">,</span> <span class="nx">i</span><span class="o">,</span> <span class="s2">&quot;value&quot;</span><span class="o">,</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>Introduced was the load: function, which is explained in the XHR Callbacks section below.</p>
</div>
<div class="section" id="xhr-callbacks">
<h2><a class="toc-backref" href="#id3">XHR Callbacks<a class="headerlink" href="#xhr-callbacks" title="Permalink to this headline">¶</a></a></h2>
<p>There are three methods one can attach to the XHR Options object to determine what to do when the data comes back.</p>
<ul class="simple">
<li>load - executed when a successful Ajax call is complete. Is passed the data and an object of the XHR properties.</li>
<li>error - executed when an Ajax call times out, or otherwise fails. Is passed the error and an object of the XHR properties.</li>
<li>handle - combination of load and error callbacks, fired when either of the two conditions are met. In the success case, behaves just like load:, and in the failure case like error:</li>
</ul>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre> <span class="nx">dojo</span><span class="p">.</span><span class="nx">xhrPost</span><span class="p">({</span>
    <span class="nx">form</span><span class="o">:</span><span class="s2">&quot;someForm&quot;</span><span class="o">,</span>
    <span class="nx">load</span><span class="o">:</span> <span class="k">function</span><span class="p">(</span><span class="nx">data</span><span class="o">,</span> <span class="nx">ioArgs</span><span class="p">){</span>
        <span class="c">// ioArgs is loaded with XHR information, but not useful in simple cases</span>
        <span class="c">// data is the response from the form&#39;s action=&quot;&quot; url</span>
    <span class="p">}</span><span class="o">,</span>
    <span class="nx">error</span><span class="o">:</span> <span class="k">function</span><span class="p">(</span><span class="nx">err</span><span class="o">,</span> <span class="nx">ioArgs</span><span class="p">){</span>
        <span class="c">// again, ioArgs is useful, but not in simple cases</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="c">// display the error</span>
    <span class="p">}</span>
 <span class="p">});</span>
 <span class="c">// or like this:</span>
 <span class="nx">dojo</span><span class="p">.</span><span class="nx">xhrPost</span><span class="p">({</span>
     <span class="nx">form</span><span class="o">:</span><span class="s2">&quot;someForm&quot;</span><span class="o">,</span>
     <span class="nx">handle</span><span class="o">:</span> <span class="k">function</span><span class="p">(</span><span class="nx">dataOrError</span><span class="o">,</span> <span class="nx">ioArgs</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">dojo</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">dataOrError</span><span class="p">)){</span>
           <span class="c">// handleAs defaults to text, so look for a string here</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
           <span class="c">// this must be an error object</span>
        <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>Alternately, you can &quot;use plain <a class="reference" href="../dojo/Deferred.html#dojo-deferred"><em>Deferred's</em></a>&quot; to register callbacks. They are slightly more difficult to work with, but the concept is the same.</p>
</div>
<div class="section" id="dojo-xhrget">
<h2><a class="toc-backref" href="#id4">dojo.xhrGet<a class="headerlink" href="#dojo-xhrget" title="Permalink to this headline">¶</a></a></h2>
<p>xhrGet will create an Ajax request using the HTTP GET method, returning some data to a callback. The callback is defined as a member of the object used to create the request (the property-bag), or by using the <a class="reference" href="dojo/Deferred">dojo.Deferred</a> .addCallback method.</p>
<p>For complete details and examples, see the <a class="reference" href="../dojo/xhrGet.html#dojo-xhrget"><em>dojo.xhrGet documentation</em></a>.</p>
</div>
<div class="section" id="dojo-xhrpost">
<h2><a class="toc-backref" href="#id5">dojo.xhrPost<a class="headerlink" href="#dojo-xhrpost" title="Permalink to this headline">¶</a></a></h2>
<p>xhrPost will create an Ajax request using the HTTP POST method and is usually used to submit data to a service.  It returns data to a callback. The callback is defined as a member of the object used to create the request (the property-bag), or by using the <a class="reference" href="dojo/Deferred">dojo.Deferred</a> .addCallback method.</p>
<p>For complete details and examples, see the <a class="reference" href="../dojo/xhrPost.html#dojo-xhrpost"><em>dojo.xhrPost documentation</em></a>.</p>
</div>
<div class="section" id="dojo-xhrput">
<h2><a class="toc-backref" href="#id6">dojo.xhrPut<a class="headerlink" href="#dojo-xhrput" title="Permalink to this headline">¶</a></a></h2>
<p>xhrPut will create an Ajax request using the HTTP PUT method and is usually used to submit data to a service.  It returns data to a callback. The callback is defined as a member of the object used to create the request (the property-bag), or by using the <a class="reference" href="dojo/Deferred">dojo.Deferred</a> .addCallback method.</p>
<p>For complete details and examples, see the <a class="reference" href="../dojo/xhrPut.html#dojo-xhrput"><em>dojo.xhrPut documentation</em></a>.</p>
</div>
<div class="section" id="dojo-xhrdelete">
<h2><a class="toc-backref" href="#id7">dojo.xhrDelete<a class="headerlink" href="#dojo-xhrdelete" title="Permalink to this headline">¶</a></a></h2>
<p>xhrDelete will create an Ajax request using the HTTP DELETE method, which is commonly used to signal to a service to delete a resource at a URI. Data returned is done via the form of a callback.  The callback is defined as a member of the object used to create the request (the property-bag), or by using the <a class="reference" href="dojo/Deferred">dojo.Deferred</a> .addCallback method.</p>
<p>For complete details and examples, see the <a class="reference" href="../dojo/xhrDelete.html#dojo-xhrdelete"><em>dojo.xhrDelete documentation</em></a>.</p>
</div>
</div>


		      </div>
		    </div>
		  </div>
		  <div class="clearfix"></div>
	</div>
      </div>
	</div>
      <div class="clearer"></div>
    </div>
<div id="footer">
    
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
</div>
<script type="text/javascript">
	document.body.className = "nihilo";
</script>
<script type="text/javascript">
    dojo.require("docs.widget.CodeViewer");
    dojo.require("docs.widget.CompoundViewer");
</script>
<!--
    <div class="footer">
      &copy; Copyright 2009, Dojo Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>-->

  </body>
</html>