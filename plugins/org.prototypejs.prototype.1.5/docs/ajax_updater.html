<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<script type="text/javascript" src="helpman_topicinit.js"></script>

   <title>Ajax.Updater</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#000000">
  <tr valign="middle">
    <td align="left">
      <p class="p_TopicHeading"><span class="f_TopicHeading">Ajax.Updater</span></p>

    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 5px;"><table cellspacing="0" cellpadding="5" bgcolor="#e1f4ff" border="1" style="background-color: #e1f4ff; border: solid 1px #99ccff; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" style="border: none"><p><span class="f_CourierFixed" style="color: #0000ff;">new Ajax.Updater(container, url[, options])</span></p>
<p><span class="f_CourierFixed">&nbsp;</span></p>
<p><span style="font-size: 9pt; font-weight: bold; color: #666699;">Performs an AJAX request and updates a container’s contents based on the response text.</span></p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p><span class="f_CourierFixed">Ajax.Updater</span> is a specialization of <span class="f_CourierFixed">Ajax.Request</span>: everything about the latter is true for the former. If you’re unfamiliar with <span class="f_CourierFixed">Ajax.Request</span>, go read its documentation before going ahead with this one.</p>
<p>&nbsp;</p>
<p class="p_Heading1" style="border-top: none; border-right: none; border-left: none;"><span class="f_Heading1">A simple example</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #0000ff;">new</span><span class="f_CodeExample" style="color: #000000;">&nbsp;Ajax.Updater(</span><span class="f_CodeExample" style="color: #800000;">'items'</span><span class="f_CodeExample" style="color: #000000;">,&nbsp;</span><span class="f_CodeExample" style="color: #800000;">'/items'</span><span class="f_CodeExample" style="color: #000000;">,&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">&nbsp;&nbsp;parameters:&nbsp;{&nbsp;text:&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">$F</span><span class="f_CodeExample" style="color: #000000;">(</span><span class="f_CodeExample" style="color: #800000;">'text'</span><span class="f_CodeExample" style="color: #000000;">)&nbsp;}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">});</span></p>
<p>&nbsp;</p>
<p class="p_Heading1" style="border-top: none; border-right: none; border-left: none;"><span class="f_Heading1">A note about timing</span></p>
<p>&nbsp;</p>
<p>The <span class="f_CourierFixed">onComplete</span> callback will get invoked after the update takes place.</p>
<p>&nbsp;</p>
<p class="p_Heading1" style="border-top: none; border-right: none; border-left: none;"><span class="f_Heading1">Additional options</span></p>
<p>&nbsp;</p>
<p>Since the goal of <span class="f_CourierFixed">Ajax.Updater</span> is specifically to update the contents of a DOM element (container) with the response text brought back by the AJAX request, it features a couple of new options, in addition to the common options set. These are:</p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 5px;"><table cellspacing="3" cellpadding="3" border="0" style="border: none; border-spacing:3px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="79" bgcolor="#cdf2fe" style="width:79px; background-color:#cdf2fe;"><p><span style="font-weight: bold;">Option</span></p>
</td>
<td valign="top" width="59" bgcolor="#cdf2fe" style="width:59px; background-color:#cdf2fe;"><p><span style="font-weight: bold;">Default</span></p>
</td>
<td valign="top" width="575" bgcolor="#cdf2fe" style="width:575px; background-color:#cdf2fe;"><p><span style="font-weight: bold;">Description</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="79" style="width:79px;"><p>evalScripts</p>
</td>
<td valign="top" width="59" style="width:59px;"><p>false</p>
</td>
<td valign="top" width="575" style="width:575px;"><p>This determines whether &lt;script&gt; elements in the response text are left in (and therefore evaluated by the browser) or not.</p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="79" style="width:79px;"><p>insertion</p>
</td>
<td valign="top" width="59" style="width:59px;"><p>None</p>
</td>
<td valign="top" width="575" style="width:575px;"><p>By default, Element.update is used, which replaces the whole contents of the container with the response text. You may want to instead insert the response text around existing contents. You just need to pass a valid Insertion object for this, such as Insertion.Bottom.</p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p>In the following example, we assume that creating a new item through AJAX returns an XHTML fragment representing only the new item, which we need to add within our list container, but at the bottom of its existing contents. Here it goes:</p>
<p>&nbsp;</p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #0000ff;">new</span><span class="f_CodeExample" style="color: #000000;">&nbsp;Ajax.Updater(</span><span class="f_CodeExample" style="color: #800000;">'items'</span><span class="f_CodeExample" style="color: #000000;">,&nbsp;</span><span class="f_CodeExample" style="color: #800000;">'/items'</span><span class="f_CodeExample" style="color: #000000;">,&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">&nbsp;&nbsp;parameters:&nbsp;{&nbsp;text:&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">$F</span><span class="f_CodeExample" style="color: #000000;">(</span><span class="f_CodeExample" style="color: #800000;">'text'</span><span class="f_CodeExample" style="color: #000000;">)&nbsp;},</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">insertion</span><span class="f_CodeExample" style="color: #000000;">:&nbsp;Insertion.Bottom</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">});</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="p_Heading1" style="border-top: none; border-right: none; border-left: none;"><span class="f_Heading1">Single container, or success/failure alternative?</span></p>
<p>&nbsp;</p>
<p>The examples above all assume you’re going to update the same container whether your request succeeds or fails. There may very well be times when you don’t want that. You may want to update only for successful requests, or update a different container on failed requests.</p>
<p>&nbsp;</p>
<p>To achieve this, you can pass an object instead of a DOM element for the container parameter. This object must exhibit a success property, whose value is the container to be updated upon successful requests. If you also provide it with a failure property, its value will be used as the container for failed requests.</p>
<p>&nbsp;</p>
<p>In the following code, only successful requests get an update:</p>
<p>&nbsp;</p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #0000ff;">new</span><span class="f_CodeExample" style="color: #000000;">&nbsp;Ajax.Updater({&nbsp;success:&nbsp;</span><span class="f_CodeExample" style="color: #800000;">'items'</span><span class="f_CodeExample" style="color: #000000;">&nbsp;},&nbsp;</span><span class="f_CodeExample" style="color: #800000;">'/items'</span><span class="f_CodeExample" style="color: #000000;">,&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">&nbsp;&nbsp;parameters:&nbsp;{&nbsp;text:&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">$F</span><span class="f_CodeExample" style="color: #000000;">(</span><span class="f_CodeExample" style="color: #800000;">'text'</span><span class="f_CodeExample" style="color: #000000;">)&nbsp;},</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">insertion</span><span class="f_CodeExample" style="color: #000000;">:&nbsp;Insertion.Bottom</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">});</span></p>
<p>&nbsp;</p>
<p>The next example assumes failed requests will feature an error message as response text, and will go on to update another element with it, probably a status zone.</p>
<p>&nbsp;</p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #0000ff;">new</span><span class="f_CodeExample" style="color: #000000;">&nbsp;Ajax.Updater({&nbsp;success:&nbsp;</span><span class="f_CodeExample" style="color: #800000;">'items'</span><span class="f_CodeExample" style="color: #000000;">,&nbsp;failure:&nbsp;</span><span class="f_CodeExample" style="color: #800000;">'notice'</span><span class="f_CodeExample" style="color: #000000;">&nbsp;},&nbsp;</span><span class="f_CodeExample" style="color: #800000;">'/items'</span><span class="f_CodeExample" style="color: #000000;">,&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">&nbsp;&nbsp;parameters:&nbsp;{&nbsp;text:&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">$F</span><span class="f_CodeExample" style="color: #000000;">(</span><span class="f_CodeExample" style="color: #800000;">'text'</span><span class="f_CodeExample" style="color: #000000;">)&nbsp;},</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">insertion</span><span class="f_CodeExample" style="color: #000000;">:&nbsp;Insertion.Bottom</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #000000;">});</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</td></tr></table>
<br>
<p style="text-align:right;padding-right:5px"><font size="1" color="#AAAAAA">Prototype API 1.5.0 - prototypejs.org</font></p>
<br>
</body>
</html>
